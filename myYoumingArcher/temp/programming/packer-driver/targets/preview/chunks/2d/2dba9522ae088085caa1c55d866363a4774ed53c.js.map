{"version":3,"sources":["file:///E:/myCocosGame/cocosCreator/myYoumingArcher/assets/script/main.ts"],"names":["_decorator","Component","game","PhysicsSystem","profiler","Constant","PlayerData","StorageManager","Util","ccclass","property","main","_minLoadDuration","onEnable","onDisable","start","frameRate","instance","getGlobalData","GAME_FRAME","window","wx","checkIsLowPhone","setGlobalData","console","log","fixedTimeStep","isDebugOpen","showStats","hideStats","loadGlobalCache","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAYC,MAAAA,a,OAAAA,a;AAAeC,MAAAA,Q,OAAAA,Q;;AADlDC,MAAAA,Q,iBAAAA,Q;;AAEAC,MAAAA,U,iBAAAA,U;;AACAC,MAAAA,c,iBAAAA,c;;AAEAC,MAAAA,I,iBAAAA,I;;;;;;;;;AACT;AACA;AACA;OACM;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBV,U;;sBAGjBW,I,WADZF,OAAO,CAAC,MAAD,C,gBAAR,MACaE,IADb,SAC0BV,SAD1B,CACoC;AAAA;AAAA;AAAA,eACxBW,gBADwB,GACG,CADH;AAAA;;AACK;AAErCC,QAAAA,QAAQ,GAAI,CACX;;AAEDC,QAAAA,SAAS,GAAI,CACZ;;AACDC,QAAAA,KAAK,GAAG;AAAA;;AACJ,cAAIC,SAAS,GAAG;AAAA;AAAA,gDAAeC,QAAf,CAAwBC,aAAxB,CAAsC,WAAtC,CAAhB;;AACA,cAAI,OAAOF,SAAP,KAAqB,QAAzB,EAAmC;AAC/BA,YAAAA,SAAS,GAAG;AAAA;AAAA,sCAASG,UAArB,CAD+B,CAE/B;;AACA,gBAAIC,MAAM,CAACC,EAAP,IAAa;AAAA;AAAA,8BAAKC,eAAL,EAAjB,EAAyC;AACrCN,cAAAA,SAAS,GAAG,EAAZ;AACH;;AAED;AAAA;AAAA,kDAAeC,QAAf,CAAwBM,aAAxB,CAAsC,WAAtC,EAAmDP,SAAnD;AACH;;AACDQ,UAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BT,SAA5B,EAXI,CAYJ;;AACAd,UAAAA,IAAI,CAACc,SAAL,GAAiBA,SAAjB,CAbI,CAcJ;;AACAb,UAAAA,aAAa,CAACc,QAAd,CAAuBS,aAAvB,GAAuC,IAAIV,SAA3C;AAEA,cAAIW,WAAW,4BAAG;AAAA;AAAA,gDAAeV,QAAf,CAAwBC,aAAxB,CAAsC,OAAtC,CAAH,oCAAqD,KAApE;AACAS,UAAAA,WAAW,KAAK,IAAhB,GAAuBvB,QAAQ,CAACwB,SAAT,EAAvB,GAA8CxB,QAAQ,CAACyB,SAAT,EAA9C,CAlBI,CAoBJ;;AACA;AAAA;AAAA,wCAAWZ,QAAX,CAAoBa,eAApB;AAEH;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAnC+B,O","sourcesContent":["import { AudioManager } from './framework/audioManager';\r\n// import { GameManager } from './fight/gameManager';\r\nimport { Constant } from './framework/constant';\r\nimport { _decorator, Component, game, Game, PhysicsSystem, profiler, sys, find } from 'cc';\r\nimport { PlayerData } from './framework/playerData';\r\nimport { StorageManager } from './framework/storageManager';\r\nimport { LocalConfig } from './framework/localConfig';\r\nimport { Util } from './framework/util';\r\n// import { SdkUtil } from './framework/sdkUtil';\r\n// import { UIManager } from './framework/uiManager';\r\n//挂载到fight场景下的canvas节点\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('main')\r\nexport class main extends Component {\r\n    private _minLoadDuration: number = 4;//加载开屏最小持续时间\r\n\r\n    onEnable () {\r\n    }\r\n\r\n    onDisable () {\r\n    }\r\n    start() {\r\n        let frameRate = StorageManager.instance.getGlobalData(\"frameRate\");\r\n        if (typeof frameRate !== \"number\") {\r\n            frameRate = Constant.GAME_FRAME;\r\n            //@ts-ignore\r\n            if (window.wx && Util.checkIsLowPhone()) {\r\n                frameRate = 30;\r\n            }\r\n\r\n            StorageManager.instance.setGlobalData(\"frameRate\", frameRate);\r\n        }\r\n        console.log(\"###frameRate\", frameRate);\r\n        // 设置帧率\r\n        game.frameRate = frameRate;\r\n        // 获取或设置每步模拟消耗的固定时间（以 s 为单位）。\r\n        PhysicsSystem.instance.fixedTimeStep = 1 / frameRate;\r\n\r\n        let isDebugOpen = StorageManager.instance.getGlobalData(\"debug\") ?? false;\r\n        isDebugOpen === true ? profiler.showStats() : profiler.hideStats();\r\n\r\n        // 加上用户id\r\n        PlayerData.instance.loadGlobalCache();\r\n\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n\r\n    }\r\n}\r\n\r\n\r\n"]}
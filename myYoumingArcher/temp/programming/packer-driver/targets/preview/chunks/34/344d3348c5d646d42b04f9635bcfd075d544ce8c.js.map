{"version":3,"sources":["file:///E:/myCocosGame/cocosCreator/myYoumingArcher/assets/script/fight/warningSkill/warningCircle.ts"],"names":["_decorator","Component","tween","Vec3","GameManager","PoolManager","ccclass","property","WarningCircle","_tweenLoop","_tweenHide","_targetWorPos","_targetScale_1","_targetScale_2","_targetScale_3","_scriptParent","start","init","scale","scriptParent","recycleWarning","set","node","setScale","playerWorPos","ndPlayer","worldPosition","x","y","z","setWorldPosition","_closeTween","showWarning","showTime","to","easing","hideWarning","call","instance","putNode","stop"],"mappings":";;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;;AAD9BC,MAAAA,W,iBAAAA,W;;AAEAC,MAAAA,W,iBAAAA,W;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U,GAC9B;;+BAEaQ,a,WADZF,OAAO,CAAC,eAAD,C,gBAAR,MACaE,aADb,SACmCP,SADnC,CAC6C;AAAA;AAAA;AAAA,eACjCQ,UADiC,GACf,IADe;AAAA,eAEjCC,UAFiC,GAEf,IAFe;AAAA,eAGjCC,aAHiC,GAGX,IAAIR,IAAJ,EAHW;AAAA,eAIjCS,cAJiC,GAIV,IAAIT,IAAJ,EAJU;AAAA,eAKjCU,cALiC,GAKV,IAAIV,IAAJ,EALU;AAAA,eAMjCW,cANiC,GAMV,IAAIX,IAAJ,EANU;AAAA,eAOjCY,aAPiC,GAOZ,IAPY;AAAA;;AASzCC,QAAAA,KAAK,GAAI,CACL;AACH;;AAEMC,QAAAA,IAAI,CAAEC,KAAF,EAAiBC,YAAjB,EAAoC;AAC3CA,UAAAA,YAAY,CAACC,cAAb;AACA,eAAKL,aAAL,GAAqBI,YAArB;;AACA,eAAKP,cAAL,CAAoBS,GAApB,CAAwBH,KAAxB,EAA+BA,KAA/B,EAAsCA,KAAtC;;AACA,eAAKL,cAAL,CAAoBQ,GAApB,CAAwBH,KAAK,GAAG,GAAhC,EAAqCA,KAAK,GAAG,GAA7C,EAAkDA,KAAK,GAAG,GAA1D;;AACA,eAAKI,IAAL,CAAUC,QAAV,CAAmB,KAAKT,cAAxB;AAEA,cAAIU,YAAY,GAAG;AAAA;AAAA,0CAAYC,QAAZ,CAAqBC,aAAxC;;AACA,eAAKf,aAAL,CAAmBU,GAAnB,CAAuBG,YAAY,CAACG,CAApC,EAAuCH,YAAY,CAACI,CAAb,GAAiB,GAAxD,EAA6DJ,YAAY,CAACK,CAA1E;;AACA,eAAKP,IAAL,CAAUQ,gBAAV,CAA2B,KAAKnB,aAAhC;;AAEA,eAAKoB,WAAL;;AACA,eAAKC,WAAL;AACH;;AAEMA,QAAAA,WAAW,GAAI;AAClB,cAAIC,QAAQ,GAAG,GAAf;AAEA,eAAKxB,UAAL,GAAkBP,KAAK,CAAC,KAAKoB,IAAN,CAAL,CACjBY,EADiB,CACdD,QADc,EACJ;AAACf,YAAAA,KAAK,EAAE,KAAKN;AAAb,WADI,EAC0B;AAACuB,YAAAA,MAAM,EAAE;AAAT,WAD1B,EAEjBnB,KAFiB,EAAlB;AAGH;;AAEMoB,QAAAA,WAAW,GAAI;AAClB,eAAKL,WAAL;;AAEA,eAAKrB,UAAL,GAAkBR,KAAK,CAAC,KAAKoB,IAAN,CAAL,CACjBY,EADiB,CACd,GADc,EACT;AAAChB,YAAAA,KAAK,EAAE,KAAKJ;AAAb,WADS,EACqB;AAACqB,YAAAA,MAAM,EAAE;AAAT,WADrB,EAEjBE,IAFiB,CAEZ,MAAI;AACN;AAAA;AAAA,4CAAYC,QAAZ,CAAqBC,OAArB,CAA6B,KAAKjB,IAAlC;;AACA,iBAAKS,WAAL;AACH,WALiB,EAMjBf,KANiB,EAAlB;AAOH;;AAEOe,QAAAA,WAAW,GAAG;AAClB,cAAI,KAAKrB,UAAT,EAAqB;AACjB,iBAAKA,UAAL,CAAgB8B,IAAhB;;AACA,iBAAK9B,UAAL,GAAkB,IAAlB;AACH;;AAED,cAAI,KAAKD,UAAT,EAAqB;AACjB,iBAAKA,UAAL,CAAgB+B,IAAhB;;AACA,iBAAK/B,UAAL,GAAkB,IAAlB;AACH;AACJ;;AA1DwC,O","sourcesContent":["import { GameManager } from './../gameManager';\nimport { _decorator, Component, tween, Vec3} from 'cc';\nimport { PoolManager } from '../../framework/poolManager';\nconst { ccclass, property } = _decorator;\n//圆圈预警脚本\n@ccclass('WarningCircle')\nexport class WarningCircle extends Component {\n    private _tweenLoop: any = null!;//循环缩小放大tween实例\n    private _tweenHide: any = null!;//缩小消失tween实例\n    private _targetWorPos: Vec3 = new Vec3();\n    private _targetScale_1: Vec3 = new Vec3();\n    private _targetScale_2: Vec3 = new Vec3();\n    private _targetScale_3: Vec3 = new Vec3();\n    private _scriptParent: any = null!;\n\n    start () {\n        // [3]\n    }\n\n    public init (scale: number, scriptParent: any) {\n        scriptParent.recycleWarning();\n        this._scriptParent = scriptParent;\n        this._targetScale_1.set(scale, scale, scale);\n        this._targetScale_2.set(scale * 0.8, scale * 0.8, scale * 0.8);\n        this.node.setScale(this._targetScale_3);\n\n        let playerWorPos = GameManager.ndPlayer.worldPosition;\n        this._targetWorPos.set(playerWorPos.x, playerWorPos.y + 0.2, playerWorPos.z);\n        this.node.setWorldPosition(this._targetWorPos);\n        \n        this._closeTween();\n        this.showWarning();\n    }\n\n    public showWarning () {\n        let showTime = 0.4;\n\n        this._tweenLoop = tween(this.node)\n        .to(showTime, {scale: this._targetScale_1}, {easing: \"smooth\"})\n        .start();        \n    }\n\n    public hideWarning () {\n        this._closeTween();\n\n        this._tweenHide = tween(this.node)\n        .to(0.3, {scale: this._targetScale_3}, {easing: \"backInOut\"})\n        .call(()=>{\n            PoolManager.instance.putNode(this.node);\n            this._closeTween();\n        })\n        .start();           \n    }\n\n    private _closeTween() {\n        if (this._tweenHide) {\n            this._tweenHide.stop();\n            this._tweenHide = null!;\n        }\n\n        if (this._tweenLoop) {\n            this._tweenLoop.stop();\n            this._tweenLoop = null!;\n        }\n    }\n}"]}
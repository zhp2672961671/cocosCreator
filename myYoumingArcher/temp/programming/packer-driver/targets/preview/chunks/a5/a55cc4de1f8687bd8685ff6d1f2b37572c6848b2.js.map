{"version":3,"sources":["file:///E:/myCocosGame/cocosCreator/myYoumingArcher/assets/script/login.ts"],"names":["_decorator","Component","game","Node","assetManager","director","Constant","ccclass","property","Login","onEnable","onDisable","start","console","log","addPersistRootNode","ndCanvas","LOGIN_TIME","Date","now","bundleRoot","arr","window","wx","forEach","item","p","Promise","resolve","reject","loadBundle","err","bundle","push","all","then","loadScene"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,Y,OAAAA,Y;AAAcC,MAAAA,Q,OAAAA,Q;;AACjDC,MAAAA,Q,iBAAAA,Q;;;;;;;;;AAET;OACM;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;uBAGjBS,K,WADZF,OAAO,CAAC,OAAD,C,UAEHC,QAAQ,CAACL,IAAD,C,2BAFb,MACaM,KADb,SAC2BR,SAD3B,CACqC;AAAA;AAAA;;AAAA;AAAA;;AAIjCS,QAAAA,QAAQ,GAAI,CACX;;AAEDC,QAAAA,SAAS,GAAI,CACZ;;AAEDC,QAAAA,KAAK,GAAI;AACLC,UAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACAZ,UAAAA,IAAI,CAACa,kBAAL,CAAwB,KAAKC,QAA7B;AAEA;AAAA;AAAA,oCAASC,UAAT,GAAsBC,IAAI,CAACC,GAAL,EAAtB;AAEA,cAAIC,UAAU,GAAG,CAAC,WAAD,EAAc,MAAd,CAAjB;AACA,cAAIC,GAAQ,GAAG,EAAf,CAPK,CASL;AACA;;AACA,cAAIC,MAAM,CAACC,EAAX,EAAe;AACXH,YAAAA,UAAU,CAACI,OAAX,CAAoBC,IAAD,IAAgB;AAC/B,kBAAIC,CAAC,GAAG,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAmB;AACnCzB,gBAAAA,YAAY,CAAC0B,UAAb,CAAwBL,IAAxB,EAA8B,UAAUM,GAAV,EAAeC,MAAf,EAAuB;AACjD,sBAAID,GAAJ,EAAS;AACP,2BAAOF,MAAM,CAACE,GAAD,CAAb;AACD;;AAEDH,kBAAAA,OAAO,CAACI,MAAD,CAAP;AACH,iBAND;AAOH,eARO,CAAR;AAUAX,cAAAA,GAAG,CAACY,IAAJ,CAASP,CAAT;AACH,aAZD;AAcAC,YAAAA,OAAO,CAACO,GAAR,CAAYb,GAAZ,EAAiBc,IAAjB,CAAsB,MAAI;AACtB9B,cAAAA,QAAQ,CAAC+B,SAAT,CAAmB,OAAnB,EAA4B,MAAI,CAC/B,CADD,EACG,MAAI,CAEN,CAHD;AAIH,aALD;AAMH,WArBD,MAqBO;AACH/B,YAAAA,QAAQ,CAAC+B,SAAT,CAAmB,OAAnB,EAA4B,MAAI,CAC/B,CADD,EACG,MAAI,CAEN,CAHD;AAIH;AACJ;;AAhDgC,O;;;;;iBAET,I","sourcesContent":["import { _decorator, Component, game, Node, assetManager, director } from 'cc';\nimport { Constant } from './framework/constant';\n\n//挂载到login场景下的canvas节点\nconst { ccclass, property } = _decorator;\n\n@ccclass('Login')\nexport class Login extends Component {\n    @property(Node)\n    public ndCanvas: Node = null!;\n\n    onEnable () {\n    }\n\n    onDisable () {\n    }\n\n    start () {        \n        console.log(\"login\");\n        game.addPersistRootNode(this.ndCanvas);\n\n        Constant.LOGIN_TIME = Date.now();\n\n        let bundleRoot = [\"resources\", \"main\"];\n        let arr: any = [];\n\n        //微信优化开屏加载性能\n        //@ts-ignore\n        if (window.wx) {\n            bundleRoot.forEach((item: string)=>{\n                let p = new Promise((resolve, reject)=>{\n                    assetManager.loadBundle(item, function (err, bundle) {\n                        if (err) {\n                          return reject(err);\n                        }\n              \n                        resolve(bundle);\n                    });\n                })\n                \n                arr.push(p);\n            })\n            \n            Promise.all(arr).then(()=>{\n                director.loadScene(\"fight\", ()=>{\n                }, ()=>{\n    \n                })  \n            })\n        } else {\n            director.loadScene(\"fight\", ()=>{\n            }, ()=>{\n\n            })  \n        }\n    }\n}\n"]}
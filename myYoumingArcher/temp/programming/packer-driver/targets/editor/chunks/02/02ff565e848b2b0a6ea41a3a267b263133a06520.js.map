{"version":3,"sources":["file:///E:/myCocosGame/cocosCreator/myYoumingArcher/assets/script/ui/setting/settingPanel.ts"],"names":["SpriteFrame","SpriteComponent","Vec3","profiler","LabelComponent","_decorator","Component","Node","UIManager","AudioManager","StorageManager","Constant","ccclass","property","SettingPanel","_isMusicOpen","_isVibrationOpen","_isDebugOpen","_curDotPos","start","show","instance","getAudioSetting","_changeState","ndBtnMusic","getGlobalData","ndBtnVibration","ndBtnDebug","ndParget","isOpen","spCom","getComponent","ndDot","getChildByName","lbTxt","ndDotPos","position","spriteFrame","sfSelect","set","y","z","setPosition","string","sfUnSelect","onBtnVibrationClick","playSound","SOUND","CLICK","setGlobalData","onBtnMusicClick","openMusic","openSound","closeMusic","closeSound","onBtnDebugClick","showStats","hideStats","onBtnCloseClick","hideDialog"],"mappings":"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","sourcesContent":["import { UIManager } from './../../framework/uiManager';\nimport { AudioManager } from './../../framework/audioManager';\nimport { SpriteFrame, SpriteComponent, Vec3, profiler, LabelComponent } from 'cc';\nimport { _decorator, Component, Node } from 'cc';\nimport { StorageManager } from '../../framework/storageManager';\nimport { Constant } from '../../framework/constant';\n\nconst { ccclass, property } = _decorator;\n//设置界面脚本\n@ccclass('SettingPanel')\nexport class SettingPanel extends Component {\n    @property(SpriteFrame)\n    public sfSelect: SpriteFrame = null!;\n\n    @property(SpriteFrame)\n    public sfUnSelect: SpriteFrame = null!;\n\n    @property(Node)\n    public ndBtnVibration: Node = null!;\n\n    @property(Node)\n    public ndBtnMusic: Node = null!;\n\n    @property(Node)\n    public ndBtnDebug: Node = null!;\n    \n    private _isMusicOpen: boolean = false;\n    private _isVibrationOpen: boolean = false;\n    private _isDebugOpen: boolean = false;\n    private _curDotPos: Vec3 = new Vec3();//当前选中点的位置\n\n    start () {\n        // [3]\n    }\n\n    public show () {\n        this._isMusicOpen = AudioManager.instance.getAudioSetting(true);\n        this._changeState(this.ndBtnMusic, this._isMusicOpen);\n\n        this._isVibrationOpen = StorageManager.instance.getGlobalData(\"vibration\") ?? true;\n        this._changeState(this.ndBtnVibration, this._isVibrationOpen);\n\n        this._isDebugOpen = StorageManager.instance.getGlobalData(\"debug\") ?? false;\n        this._changeState(this.ndBtnDebug, this._isDebugOpen);\n    }\n\n    private _changeState (ndParget: Node, isOpen: boolean) {\n        let spCom = ndParget.getComponent(SpriteComponent) as SpriteComponent;\n        let ndDot = ndParget.getChildByName(\"dot\") as Node;\n        let lbTxt = ndDot.getChildByName(\"txt\")?.getComponent(LabelComponent) as LabelComponent;\n        let ndDotPos = ndDot.position;\n\n        if (isOpen) {\n            spCom.spriteFrame = this.sfSelect;\n            this._curDotPos.set(24, ndDotPos.y, ndDotPos.z);\n            ndDot.setPosition(this._curDotPos);\n            lbTxt.string = \"开\";\n        } else {\n            spCom.spriteFrame = this.sfUnSelect;\n            this._curDotPos.set(-24, ndDotPos.y, ndDotPos.z);\n            ndDot.setPosition(this._curDotPos);\n            lbTxt.string = \"关\";\n        }\n    }\n\n    public onBtnVibrationClick () {\n        AudioManager.instance.playSound(Constant.SOUND.CLICK);\n\n        this._isVibrationOpen = !this._isVibrationOpen;\n        this._changeState(this.ndBtnVibration, this._isVibrationOpen);\n        StorageManager.instance.setGlobalData(\"vibration\", this._isVibrationOpen);\n    }\n\n    public onBtnMusicClick () {\n        AudioManager.instance.playSound(Constant.SOUND.CLICK);\n\n        this._isMusicOpen = !this._isMusicOpen;\n        this._changeState(this.ndBtnMusic, this._isMusicOpen);\n\n        if (this._isMusicOpen) {\n            AudioManager.instance.openMusic();\n            AudioManager.instance.openSound();\n        } else {\n            AudioManager.instance.closeMusic();\n            AudioManager.instance.closeSound();\n        }\n    }\n\n    public onBtnDebugClick () {\n        AudioManager.instance.playSound(Constant.SOUND.CLICK);\n\n        this._isDebugOpen = !this._isDebugOpen;\n        this._changeState(this.ndBtnDebug, this._isDebugOpen);\n        StorageManager.instance.setGlobalData(\"debug\", this._isDebugOpen);\n\n        this._isDebugOpen === true ? profiler.showStats() : profiler.hideStats();\n    }\n\n    public onBtnCloseClick () {\n        AudioManager.instance.playSound(Constant.SOUND.CLICK);\n\n        UIManager.instance.hideDialog(\"setting/settingPanel\");\n    }\n\n    // update (deltaTime: number) {\n    //     // [4]\n    // }\n}\n"]}
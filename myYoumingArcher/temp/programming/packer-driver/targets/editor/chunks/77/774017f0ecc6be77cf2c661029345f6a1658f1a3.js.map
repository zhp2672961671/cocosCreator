{"version":3,"sources":["file:///E:/myCocosGame/cocosCreator/myYoumingArcher/assets/script/fight/gameCamera.ts"],"names":["_decorator","Component","Vec3","ccclass","property","GameCamera","ndFollowTarget","_oriCameraWorPos","_targetCameraWorPos","_curCameraWorPos","start","node","worldPosition","clone","resetCamera","set","lateUpdate","active","lerp","x","y","z","setWorldPosition"],"mappings":";;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,I,OAAAA,I;;;;;;;;;OAChC;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U,GAC9B;;4BAEaK,U,WADZF,OAAO,CAAC,YAAD,C,gBAAR,MACaE,UADb,SACgCJ,SADhC,CAC0C;AAAA;AAAA;AAAA,eAE/BK,cAF+B,GAER,IAFQ;AAAA,eAI9BC,gBAJ8B,GAIL,IAAIL,IAAJ,EAJK;AAAA,eAK9BM,mBAL8B,GAKF,IAAIN,IAAJ,EALE;AAAA,eAM9BO,gBAN8B,GAML,IAAIP,IAAJ,EANK;AAAA;;AAMM;AAE5CQ,QAAAA,KAAK,GAAI;AACL,eAAKH,gBAAL,GAAwB,KAAKI,IAAL,CAAUC,aAAV,CAAwBC,KAAxB,EAAxB;AACH;;AAEMC,QAAAA,WAAW,GAAI;AAClB,eAAKN,mBAAL,CAAyBO,GAAzB,CAA6B,KAAKR,gBAAlC;AACH,SAdqC,CAgBtC;AACA;AACA;;;AAEAS,QAAAA,UAAU,GAAI;AACV,cAAI,CAAC,KAAKV,cAAN,IAAwB,CAAC,KAAKA,cAAL,CAAoBM,aAA7C,IAA8D,CAAC,KAAKN,cAAL,CAAoBW,MAAvF,EAA+F;AAC3F;AACH;;AAED,eAAKT,mBAAL,GAA2B,KAAKA,mBAAL,CAAyBU,IAAzB,CAA8B,KAAKZ,cAAL,CAAoBM,aAAlD,EAAiE,GAAjE,CAA3B;;AACA,eAAKH,gBAAL,CAAsBM,GAAtB,CAA0B,KAAKR,gBAAL,CAAsBY,CAAtB,GAA0B,KAAKX,mBAAL,CAAyBW,CAA7E,EAAgF,KAAKZ,gBAAL,CAAsBa,CAAtG,EAAyG,KAAKb,gBAAL,CAAsBc,CAAtB,GAA0B,KAAKb,mBAAL,CAAyBa,CAA5J;;AACA,eAAKV,IAAL,CAAUW,gBAAV,CAA2B,KAAKb,gBAAhC;AACH;;AA5BqC,O","sourcesContent":["import { _decorator, Component, Node, Vec3 } from 'cc';\nconst { ccclass, property } = _decorator;\n//游戏相机脚本\n@ccclass('GameCamera')\nexport class GameCamera extends Component {\n\n    public ndFollowTarget: Node = null!;//相机跟随的目标节点\n\n    private _oriCameraWorPos: Vec3 = new Vec3();//初始相机世界坐标\n    private _targetCameraWorPos: Vec3 = new Vec3();//目标相机世界坐标\n    private _curCameraWorPos: Vec3 = new Vec3();//目标相机世界坐标\n\n    start () {\n        this._oriCameraWorPos = this.node.worldPosition.clone();\n    }\n\n    public resetCamera () {\n        this._targetCameraWorPos.set(this._oriCameraWorPos);\n    }\n\n    // update (deltaTime: number) {\n    //     // [4]\n    // }\n\n    lateUpdate () {\n        if (!this.ndFollowTarget || !this.ndFollowTarget.worldPosition || !this.ndFollowTarget.active) {\n            return;\n        }\n\n        this._targetCameraWorPos = this._targetCameraWorPos.lerp(this.ndFollowTarget.worldPosition, 0.5);\n        this._curCameraWorPos.set(this._oriCameraWorPos.x + this._targetCameraWorPos.x, this._oriCameraWorPos.y, this._oriCameraWorPos.z + this._targetCameraWorPos.z);\n        this.node.setWorldPosition(this._curCameraWorPos);\n    }\n}"]}
{"version":3,"sources":["file:///E:/myCocosGame/youmingArcher/assets/script/ui/skill/skillItem.ts"],"names":["_decorator","Component","SpriteComponent","LabelComponent","GameManager","AudioManager","Constant","EffectManager","PlayerData","ResourceUtil","ccclass","property","SkillItem","_callback","_itemInfo","start","init","itemInfo","callback","lbName","string","name","lbDesc","desc","setSpriteFrame","icon","spIcon","err","onBtnItemClick","instance","playSound","SOUND","GET_SKILL","addPlayerSkill","loadAndPlayEffect","ndPlayer","gameSpeed"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,e,OAAAA,e;AAAiBC,MAAAA,c,OAAAA,c;;AACxCC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,a,iBAAAA,a;;AACAC,MAAAA,U,iBAAAA,U;;AACAC,MAAAA,Y,iBAAAA,Y;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBX,U,GAC9B;;2BAEaY,S,WADZF,OAAO,CAAC,WAAD,C,UAEHC,QAAQ,CAACT,eAAD,C,UAGRS,QAAQ,CAACR,cAAD,C,UAGRQ,QAAQ,CAACR,cAAD,C,2BARb,MACaS,SADb,SAC+BX,SAD/B,CACyC;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eAU7BY,SAV6B,GAUP,IAVO;AAAA,eAW7BC,SAX6B,GAWZ,IAXY;AAAA;;AAarCC,QAAAA,KAAK,GAAI,CACL;AACH;;AAEMC,QAAAA,IAAI,CAAEC,QAAF,EAAiBC,QAAjB,EAAqC;AAC5C,eAAKJ,SAAL,GAAiBG,QAAjB;AACA,eAAKJ,SAAL,GAAiBK,QAAjB;AAEA,eAAKC,MAAL,CAAYC,MAAZ,GAAqBH,QAAQ,CAACI,IAA9B;AACA,eAAKC,MAAL,CAAYF,MAAZ,GAAqBH,QAAQ,CAACM,IAA9B;AACA;AAAA;AAAA,4CAAaC,cAAb,CAA6B,qBAAoBP,QAAQ,CAACQ,IAAK,EAA/D,EAAkE,KAAKC,MAAvE,EAAgFC,GAAD,IAAY,CAAE,CAA7F;AACH;;AAEMC,QAAAA,cAAc,GAAI;AACrB;AAAA;AAAA,4CAAaC,QAAb,CAAsBC,SAAtB,CAAgC;AAAA;AAAA,oCAASC,KAAT,CAAeC,SAA/C;AAEA,eAAKnB,SAAL,IAAkB,KAAKA,SAAL,EAAlB;AACA;AAAA;AAAA,wCAAWgB,QAAX,CAAoBI,cAApB,CAAmC,KAAKnB,SAAxC;AAEA;AAAA;AAAA,8CAAce,QAAd,CAAuBK,iBAAvB,CAAyC,IAAzC,EAA+C;AAAA;AAAA,0CAAYC,QAA3D,EAAqE,iBAArE,EAAwF,CAAxF,EAA2F,IAA3F,EAAiG,IAAjG,EAAuG,KAAvG,EAA8G,IAA9G,EAAoH;AAAA;AAAA,0CAAYC,SAAhI,EAA2I,IAA3I;AACH;;AAjCoC,O;;;;;iBAEJ,I;;;;;;;iBAGD,I;;;;;;;iBAGA,I","sourcesContent":["import { _decorator, Component, SpriteComponent, LabelComponent } from 'cc';\nimport { GameManager } from '../../fight/gameManager';\nimport { AudioManager } from '../../framework/audioManager';\nimport { Constant } from '../../framework/constant';\nimport { EffectManager } from '../../framework/effectManager';\nimport { PlayerData } from '../../framework/playerData';\nimport { ResourceUtil } from '../../framework/resourceUtil';\nconst { ccclass, property } = _decorator;\n//技能脚本\n@ccclass('SkillItem')\nexport class SkillItem extends Component {\n    @property(SpriteComponent)\n    public spIcon: SpriteComponent = null!;\n    \n    @property(LabelComponent)\n    public lbName: LabelComponent = null!;\n\n    @property(LabelComponent)\n    public lbDesc: LabelComponent = null!;\n\n    private _callback: Function = null!;\n    private _itemInfo: any = null!;\n\n    start () {\n        // [3]\n    }\n\n    public init (itemInfo: any, callback: Function) {\n        this._itemInfo = itemInfo;\n        this._callback = callback;\n\n        this.lbName.string = itemInfo.name;\n        this.lbDesc.string = itemInfo.desc;\n        ResourceUtil.setSpriteFrame(`texture/skillIcon/${itemInfo.icon}`, this.spIcon, (err: any)=>{});\n    }\n\n    public onBtnItemClick () {\n        AudioManager.instance.playSound(Constant.SOUND.GET_SKILL);\n\n        this._callback && this._callback();\n        PlayerData.instance.addPlayerSkill(this._itemInfo);\n\n        EffectManager.instance.loadAndPlayEffect(true, GameManager.ndPlayer, \"levelUp/levelUp\", 1, null, null, false, true, GameManager.gameSpeed, true);\n    }\n}\n"]}
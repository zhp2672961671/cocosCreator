{"version":3,"sources":["file:///E:/myCocosGame/youmingArcher/assets/script/ui/skill/skillPanel.ts"],"names":["_decorator","Component","Node","SpriteComponent","LabelComponent","LocalConfig","GameManager","SkillItem","Util","UIManager","Constant","PlayerData","AudioManager","ccclass","property","SkillPanel","_gold","_callback","start","show","callback","lbGold","string","arrLock","instance","getLockPlyerSkill","shuffle","ndSkills","children","forEach","ndChild","idx","arr","info","queryByID","ID","active","scriptItem","getComponent","init","_close","onBtnGiveUpClick","playSound","SOUND","SELL","addGold","onBtnRefreshClick","CLICK","hideDialog","showDialog"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,e,OAAAA,e;AAAiBC,MAAAA,c,OAAAA,c;;AAP9CC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,I,iBAAAA,I;;AACAC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,U,iBAAAA,U;;AAEAC,MAAAA,Y,iBAAAA,Y;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBd,U,GAC9B;;4BAEae,U,WADZF,OAAO,CAAC,YAAD,C,UAEHC,QAAQ,CAACZ,IAAD,C,UAGRY,QAAQ,CAACX,eAAD,C,UAGRW,QAAQ,CAACV,cAAD,C,2BARb,MACaW,UADb,SACgCd,SADhC,CAC0C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eAU9Be,KAV8B,GAUd,EAVc;AAAA,eAW9BC,SAX8B,GAWR,IAXQ;AAAA;;AAatCC,QAAAA,KAAK,GAAI,CACL;AACH;;AAEMC,QAAAA,IAAI,CAAEC,QAAF,EAAuB;AAC9B,eAAKH,SAAL,GAAiBG,QAAjB;AACA,eAAKC,MAAL,CAAYC,MAAZ,GAAsB,MAAK,KAAKN,KAAM,EAAtC;AAEA,cAAIO,OAAY,GAAG;AAAA;AAAA,wCAAWC,QAAX,CAAoBC,iBAApB,EAAnB;AACAF,UAAAA,OAAO,GAAG;AAAA;AAAA,4BAAKG,OAAL,CAAaH,OAAb,CAAV;AAEA,eAAKI,QAAL,CAAcC,QAAd,CAAuBC,OAAvB,CAA+B,CAACC,OAAD,EAAgBC,GAAhB,EAA6BC,GAA7B,KAAwC;AACnE,gBAAIT,OAAO,CAACQ,GAAD,CAAX,EAAkB;AACd,kBAAIE,IAAS,GAAG;AAAA;AAAA,8CAAYT,QAAZ,CAAqBU,SAArB,CAA+B,aAA/B,EAA8CX,OAAO,CAACQ,GAAD,CAAP,CAAaI,EAA3D,CAAhB;AACAL,cAAAA,OAAO,CAACM,MAAR,GAAiB,IAAjB;AACA,kBAAIC,UAAU,GAAGP,OAAO,CAACQ,YAAR;AAAA;AAAA,yCAAjB;AACAD,cAAAA,UAAU,CAACE,IAAX,CAAgBN,IAAhB,EAAsB,MAAI;AACtB,qBAAKO,MAAL;AACH,eAFD;AAGH,aAPD,MAOO;AACHV,cAAAA,OAAO,CAACM,MAAR,GAAiB,KAAjB;AACH;AACJ,WAXD;AAYH;;AAEMK,QAAAA,gBAAgB,GAAI;AACvB;AAAA;AAAA,4CAAajB,QAAb,CAAsBkB,SAAtB,CAAgC;AAAA;AAAA,oCAASC,KAAT,CAAeC,IAA/C;AAEA;AAAA;AAAA,0CAAYC,OAAZ,CAAoB,KAAK7B,KAAzB;;AACA,eAAKwB,MAAL;AACH;;AAEMM,QAAAA,iBAAiB,GAAI;AACxB;AAAA;AAAA,4CAAatB,QAAb,CAAsBkB,SAAtB,CAAgC;AAAA;AAAA,oCAASC,KAAT,CAAeI,KAA/C;AAEA,eAAK5B,IAAL,CAAU,KAAKF,SAAf;AACH;;AAEOuB,QAAAA,MAAM,GAAI;AACd,eAAKvB,SAAL,IAAkB,KAAKA,SAAL,EAAlB;AACA;AAAA;AAAA,sCAAUO,QAAV,CAAmBwB,UAAnB,CAA8B,kBAA9B;AACA;AAAA;AAAA,sCAAUxB,QAAV,CAAmByB,UAAnB,CAA8B,kBAA9B;AACH,SAvDqC,CAyDtC;AACA;AACA;;;AA3DsC,O;;;;;iBAEd,I;;;;;;;iBAGgB,I;;;;;;;iBAGR,I","sourcesContent":["import { LocalConfig } from './../../framework/localConfig';\nimport { GameManager } from './../../fight/gameManager';\nimport { SkillItem } from './skillItem';\nimport { Util } from './../../framework/util';\nimport { UIManager } from './../../framework/uiManager';\nimport { Constant } from './../../framework/constant';\nimport { PlayerData } from './../../framework/playerData';\nimport { _decorator, Component, Node, SpriteComponent, LabelComponent } from 'cc';\nimport { AudioManager } from '../../framework/audioManager';\nconst { ccclass, property } = _decorator;\n//技能界面脚本\n@ccclass('SkillPanel')\nexport class SkillPanel extends Component {\n    @property(Node)\n    public ndSkills: Node = null!\n\n    @property(SpriteComponent)\n    public spRefreshIcon: SpriteComponent = null!;\n\n    @property(LabelComponent)\n    public lbGold: LabelComponent = null!;\n\n    private _gold: number = 50;\n    private _callback: Function = null!;\n\n    start () {\n        // [3]\n    }\n\n    public show (callback?: Function) {\n        this._callback = callback!;\n        this.lbGold.string = `获得 ${this._gold}`;\n\n        let arrLock: any = PlayerData.instance.getLockPlyerSkill();\n        arrLock = Util.shuffle(arrLock);\n        \n        this.ndSkills.children.forEach((ndChild: Node, idx: number, arr: any)=>{\n            if (arrLock[idx]) {\n                let info: any = LocalConfig.instance.queryByID(\"playerSkill\", arrLock[idx].ID);\n                ndChild.active = true;\n                let scriptItem = ndChild.getComponent(SkillItem) as SkillItem;\n                scriptItem.init(info, ()=>{\n                    this._close();\n                });\n            } else {\n                ndChild.active = false;\n            }\n        })\n    }\n\n    public onBtnGiveUpClick () {\n        AudioManager.instance.playSound(Constant.SOUND.SELL);\n\n        GameManager.addGold(this._gold);\n        this._close();\n    }\n\n    public onBtnRefreshClick () {\n        AudioManager.instance.playSound(Constant.SOUND.CLICK);\n\n        this.show(this._callback);\n    }\n\n    private _close () {\n        this._callback && this._callback();\n        UIManager.instance.hideDialog(\"skill/skillPanel\");\n        UIManager.instance.showDialog(\"fight/fightPanel\");\n    }\n\n    // update (deltaTime: number) {\n    //     // [4]\n    // }\n}\n"]}
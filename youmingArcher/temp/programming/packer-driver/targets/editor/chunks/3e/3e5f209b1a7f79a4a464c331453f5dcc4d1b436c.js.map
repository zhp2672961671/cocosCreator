{"version":3,"sources":["file:///E:/myCocosGame/youmingArcher/assets/script/ui/pause/pausePanel.ts"],"names":["_decorator","Component","Node","SpriteComponent","LabelComponent","SpriteFrame","ClientEvent","Constant","GameManager","UIManager","SkillList","AudioManager","ResourceUtil","PlayerData","ccclass","property","PausePanel","_isMusicOpen","start","show","arrSkill","instance","playerInfo","length","ndSkillItem","active","ndSkillList","scriptSkillList","getComponent","init","itemInfo","lbSkillName","string","name","lbSkillDesc","desc","setSpriteFrame","icon","spSkillIcon","err","getAudioSetting","changeState","spBtnSound","spriteFrame","sfMusicOn","sfMusicOff","onBtnSoundClick","playSound","SOUND","CLICK","openMusic","openSound","closeMusic","closeSound","onBtnHomeClick","showDialog","hideDialog","isGameOver","dispatchEvent","EVENT_TYPE","RECYCLE_ALL","PRIORITY","WAITING","onBtnPlayClick","isGamePause"],"mappings":"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","sourcesContent":["import { ClientEvent } from './../../framework/clientEvent';\nimport { Constant } from './../../framework/constant';\nimport { GameManager } from './../../fight/gameManager';\nimport { UIManager } from './../../framework/uiManager';\nimport { SkillList } from './skillList';\nimport { _decorator, Component, Node, SpriteComponent, LabelComponent, SpriteFrame } from 'cc';\nimport { AudioManager } from '../../framework/audioManager';\nimport { ResourceUtil } from '../../framework/resourceUtil';\nimport { PlayerData } from '../../framework/playerData';\nconst { ccclass, property } = _decorator;\n//暂停界面脚本\n@ccclass('PausePanel')\nexport class PausePanel extends Component {\n    @property(SpriteComponent)\n    public spSkillIcon: SpriteComponent = null!;\n\n    @property(LabelComponent)\n    public lbSkillName: LabelComponent = null!;\n\n    @property(LabelComponent)\n    public lbSkillDesc: LabelComponent = null!;\n\n    @property(Node)\n    public ndSkillList: Node = null!;\n\n    @property(SpriteFrame)\n    public sfMusicOn: SpriteFrame = null!;\n\n    @property(SpriteFrame)\n    public sfMusicOff: SpriteFrame = null!;\n\n    @property(SpriteComponent)\n    public spBtnSound: SpriteComponent = null!;\n\n    @property(Node)\n    public ndSkillItem: Node = null!;\n\n    private _isMusicOpen: boolean = false;\n\n    start () {\n        // [3]\n    }\n\n    show () {\n        let arrSkill = PlayerData.instance.playerInfo.arrSkill;\n        if (!arrSkill.length) {\n            this.ndSkillItem.active = false;\n            this.ndSkillList.active = false;\n        } else {\n            this.ndSkillItem.active = true;\n            this.ndSkillList.active = true;\n\n            let scriptSkillList = this.ndSkillList.getComponent(SkillList) as SkillList;\n\n            scriptSkillList.init((itemInfo: any)=>{\n                this.lbSkillName.string = itemInfo.name;\n                this.lbSkillDesc.string = itemInfo.desc;\n                ResourceUtil.setSpriteFrame(`texture/skillIcon/${itemInfo.icon}`, this.spSkillIcon, (err: any)=>{});\n            });\n        }\n\n        this._isMusicOpen = AudioManager.instance.getAudioSetting(true);\n        this.changeState();\n    }\n\n    public changeState () {\n        if (this._isMusicOpen) {\n            this.spBtnSound.spriteFrame = this.sfMusicOn;\n        } else {\n            this.spBtnSound.spriteFrame = this.sfMusicOff;\n        }\n    }\n\n    public onBtnSoundClick () {\n        AudioManager.instance.playSound(Constant.SOUND.CLICK);\n\n        this._isMusicOpen = !this._isMusicOpen;\n        this.changeState();\n\n        if (this._isMusicOpen) {\n            AudioManager.instance.openMusic();\n            AudioManager.instance.openSound();\n        } else {\n            AudioManager.instance.closeMusic();\n            AudioManager.instance.closeSound();\n        }\n    }\n\n    public onBtnHomeClick () {\n        AudioManager.instance.playSound(Constant.SOUND.CLICK);\n\n        UIManager.instance.showDialog(\"back/backPanel\", [()=>{\n            UIManager.instance.hideDialog(\"fight/fightPanel\");\n            UIManager.instance.hideDialog(\"pause/pausePanel\");\n            GameManager.isGameOver = true;\n            ClientEvent.dispatchEvent(Constant.EVENT_TYPE.RECYCLE_ALL);\n            UIManager.instance.showDialog(\"home/homePanel\");\n        }], ()=>{}, Constant.PRIORITY.WAITING);\n    }\n\n    public onBtnPlayClick () {\n        AudioManager.instance.playSound(Constant.SOUND.CLICK);\n\n        UIManager.instance.hideDialog(\"pause/pausePanel\");\n        GameManager.isGamePause = false;\n    }\n\n    // update (deltaTime: number) {\n    //     // [4]\n    // }\n}\n"]}
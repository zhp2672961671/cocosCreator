{"version":3,"sources":["file:///E:/myCocosGame/youmingArcher/assets/script/ui/pause/skillIcon.ts"],"names":["_decorator","Component","Node","ButtonComponent","SpriteComponent","Constant","ClientEvent","ResourceUtil","AudioManager","ccclass","property","SkillIcon","_callback","_itemInfo","_isSelected","onEnable","on","EVENT_TYPE","HIDE_SKILL_ICON_SELECTED","_hideSelected","onDisable","off","start","init","idx","itemInfo","callback","_showSelected","btnCom","transition","Transition","SCALE","NONE","setSpriteFrame","icon","spIcon","err","onItemClick","instance","playSound","SOUND","CLICK","dispatchEvent","ndBg","active"],"mappings":"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","sourcesContent":["import { Constant } from './../../framework/constant';\nimport { _decorator, Component, Node, ButtonComponent, Button, SpriteComponent } from 'cc';\nimport { ClientEvent } from '../../framework/clientEvent';\nimport { ResourceUtil } from '../../framework/resourceUtil';\nimport { AudioManager } from '../../framework/audioManager';\nconst { ccclass, property } = _decorator;\n//技能图标脚本\n@ccclass('SkillIcon')\nexport class SkillIcon extends Component {\n    @property(ButtonComponent)\n    public btnCom: ButtonComponent = null!;\n\n    @property(SpriteComponent)\n    public spIcon: SpriteComponent = null!;\n\n    @property(Node)\n    public ndBg: Node = null!;\n\n    private _callback: Function = null!;\n    private _itemInfo: any = null!;\n    private _isSelected: boolean = false;\n\n    onEnable () {\n        ClientEvent.on(Constant.EVENT_TYPE.HIDE_SKILL_ICON_SELECTED, this._hideSelected, this);\n    }\n\n    onDisable () {\n        ClientEvent.off(Constant.EVENT_TYPE.HIDE_SKILL_ICON_SELECTED, this._hideSelected, this);\n    }\n\n    start () {\n        // [3]\n    }\n\n    public init (idx: number, itemInfo: any, callback?: Function) {\n        this._itemInfo = itemInfo;\n        this._callback = callback!;\n        this._isSelected = false;\n\n        if (idx === 0 && this._callback) {\n            this._showSelected();\n            this._callback(this._itemInfo);\n        } else {\n            this._hideSelected();\n        }\n\n        if (callback) {\n            this.btnCom.transition = ButtonComponent.Transition.SCALE;\n        } else {\n            this.btnCom.transition = ButtonComponent.Transition.NONE;\n        }\n\n        ResourceUtil.setSpriteFrame(`texture/skillIcon/${itemInfo.icon}`, this.spIcon, (err: any)=>{});\n    }\n\n    public onItemClick () {\n        AudioManager.instance.playSound(Constant.SOUND.CLICK);\n\n        if (!this._isSelected && this._callback) {\n            ClientEvent.dispatchEvent(Constant.EVENT_TYPE.HIDE_SKILL_ICON_SELECTED);\n            this._callback(this._itemInfo);\n            this._showSelected();\n        }\n    }\n\n    private _showSelected () {\n        this._isSelected = true;\n        this.ndBg.active = true;\n    }\n\n    private _hideSelected () {\n        this._isSelected = false;\n        this.ndBg.active = false;\n    }\n\n    // update (deltaTime: number) {\n    //     // [4]\n    // }\n}\n\n/**\n * [1] Class member could be defined like this.\n * [2] Use `property` decorator if your want the member to be serializable.\n * [3] Your initialization goes here.\n * [4] Your update function goes here.\n *\n * Learn more about scripting: https://docs.cocos.com/creator/3.0/manual/en/scripting/\n * Learn more about CCClass: https://docs.cocos.com/creator/3.0/manual/en/scripting/ccclass.html\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.0/manual/en/scripting/life-cycle-callbacks.html\n */\n"]}
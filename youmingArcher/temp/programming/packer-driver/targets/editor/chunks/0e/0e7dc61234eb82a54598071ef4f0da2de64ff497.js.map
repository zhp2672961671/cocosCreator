{"version":3,"sources":["file:///E:/myCocosGame/youmingArcher/assets/script/fight/boss.ts"],"names":["Node","ParticleSystemComponent","Vec3","_decorator","AnimationComponent","Material","MeshRenderer","Monster","ClientEvent","UIManager","Constant","EffectManager","GameManager","ResourceUtil","JetFires","EnergyBall","FireBall","Dispersion","Tornado","FireBallBig","DispersionSurround","Laser","AudioManager","Util","PoolManager","ccclass","property","Boss","_countdown","_oriSkillEuler","_isSkillReleasing","init","baseInfo","layerInfo","_bloodTipOffsetPos","set","_hitEffectPos","meshDragon","setMaterial","matDragon","refreshBlood","bloodNum","tipType","dispatchEvent","EVENT_TYPE","REFRESH_BOSS_BLOOD","instance","showBloodTips","playAttackAni","releaseSkillToPlayer","isNormalAttack","allSkillInfo","length","offsetLength","getTwoNodeXZLength","node","ndPlayer","_minLength","_minLengthRatio","scriptPlayer","reduceBlood","skillInfo","ID","MONSTER_SKILL","JET_FIRES","loadEffectRes","resName","then","prefab","isMoving","ndMonsterSkill","getNode","ndGameManager","setWorldPosition","worldPosition","x","z","forward","attackForward","negative","scriptSkillCollider","ENERGY_BALL","ndSocketDragonHead","getComponent","FIRE_BALL","DISPERSION","children","forEach","ndChild","idx","TORNADO","FIRE_BALL_BIG","DISPERSION_SURROUND","LASER","_refreshSkill","eulerAngles","getChildByName","active","playParticle","playSound","SOUND","JET_FIRE","arrParticle","getComponentsInChildren","element","simulationSpeed","clear","stop","play","aniCom","aniState","aniName","defaultClip","name","getState","time","sample","speed","gameSpeed","once","EventType","FINISHED","scriptWarning","hideWarning","setTimeout","putNode","changeDragonMat","matDragonHit","lateUpdate","deltaTime","isDie"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGSA,MAAAA,I,OAAAA,I;AAAMC,MAAAA,uB,OAAAA,uB;AAAyBC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,U,OAAAA,U;AAAYC,MAAAA,kB,OAAAA,kB;AAAoCC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,Y,OAAAA,Y;;AAH/FC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,S,iBAAAA,S;;AAEAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,a,iBAAAA,a;;AACAC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,U,kBAAAA,U;;AACAC,MAAAA,Q,kBAAAA,Q;;AACAC,MAAAA,U,kBAAAA,U;;AACAC,MAAAA,O,kBAAAA,O;;AACAC,MAAAA,W,kBAAAA,W;;AACAC,MAAAA,kB,kBAAAA,kB;;AACAC,MAAAA,K,kBAAAA,K;;AACAC,MAAAA,Y,kBAAAA,Y;;AACAC,MAAAA,I,kBAAAA,I;;AACAC,MAAAA,W,kBAAAA,W;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBvB,U,GAC9B;;sBAEawB,I,WADZF,OAAO,CAAC,MAAD,C,UAEHC,QAAQ,CAAC1B,IAAD,C,UAGR0B,QAAQ,CAACrB,QAAD,C,UAGRqB,QAAQ,CAACrB,QAAD,C,UAGRqB,QAAQ,CAACpB,YAAD,C,2BAXb,MACaqB,IADb;AAAA;AAAA,8BACkC;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eAatBC,UAbsB,GAaD,GAbC;AAAA,eActBC,cAdsB,GAcC,IAAI3B,IAAJ,EAdD;AAAA,eAetB4B,iBAfsB,GAeO,KAfP;AAAA;;AAea;AAEpCC,QAAAA,IAAI,CAACC,QAAD,EAAgBC,SAAhB,EAAgC;AAAA;;AACvC,gBAAMF,IAAN,CAAWC,QAAX,EAAqBC,SAArB;;AAEA,eAAKC,kBAAL,CAAwBC,GAAxB,CAA4B,CAA5B,EAA+B,EAA/B,EAAmC,CAAnC;;AACA,eAAKC,aAAL,CAAmBD,GAAnB,CAAuB,CAAvB,EAA0B,IAA1B,EAAgC,CAAhC;;AACA,eAAKL,iBAAL,GAAyB,KAAzB;AACA,eAAKF,UAAL,GAAkB,GAAlB;AACA,mCAAKS,UAAL,sCAAiBC,WAAjB,CAA6B,KAAKC,SAAlC,EAA6C,CAA7C;AACH;;AAEMC,QAAAA,YAAY,CAAEC,QAAF,EAAoBC,OAApB,EAAqC;AACpD;AAAA;AAAA,0CAAYC,aAAZ,CAA0B;AAAA;AAAA,oCAASC,UAAT,CAAoBC,kBAA9C,EAAkEJ,QAAlE;AACA;AAAA;AAAA,sCAAUK,QAAV,CAAmBC,aAAnB,CAAiC,IAAjC,EAAuCL,OAAvC,EAAgDD,QAAhD,EAA0D,KAAKP,kBAA/D;AACH;;AAEMc,QAAAA,aAAa,GAAI;AACpB,gBAAMA,aAAN;AAEA,eAAKlB,iBAAL,GAAyB,KAAzB;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;;;AACWmB,QAAAA,oBAAoB,CAAEC,cAAuB,GAAG,KAA5B,EAAmC;AAC1D,cAAI,KAAKpB,iBAAT,EAA4B;AACxB;AACH,WAHyD,CAK1D;;;AACA,cAAI,CAAC,KAAKqB,YAAL,CAAkBC,MAAvB,EAA+B;AAC3B,gBAAIC,YAAY,GAAG;AAAA;AAAA,8BAAKC,kBAAL,CAAwB,KAAKC,IAA7B,EAAmC;AAAA;AAAA,4CAAYC,QAA/C,CAAnB;;AACA,gBAAIH,YAAY,IAAI,KAAKI,UAAL,GAAkB,KAAKC,eAA3C,EAA4D;AACxD;AAAA;AAAA,8CAAYC,YAAZ,CAAyBC,WAAzB,CAAqC,KAAK5B,QAA1C;AACH;;AACD;AACH;;AAED,cAAIkB,cAAc,IAAI,KAAKW,SAAL,CAAeC,EAAf,KAAsB;AAAA;AAAA,oCAASC,aAAT,CAAuBC,SAAnE,EAA8E;AAC1E,iBAAKlC,iBAAL,GAAyB,IAAzB;AAEA;AAAA;AAAA,8CAAamC,aAAb,CAA4B,GAAE,KAAKJ,SAAL,CAAeK,OAAQ,IAAG,KAAKL,SAAL,CAAeK,OAAQ,EAA/E,EAAkFC,IAAlF,CAAwFC,MAAD,IAAe;AAClG,kBAAI,KAAKC,QAAT,EAAmB;AACf;AACH;;AAED,kBAAIC,cAAc,GAAG;AAAA;AAAA,8CAAYxB,QAAZ,CAAqByB,OAArB,CAA6BH,MAA7B,EAAqC;AAAA;AAAA,8CAAYI,aAAjD,CAArB;AACAF,cAAAA,cAAc,CAACG,gBAAf,CAAgC,KAAKlB,IAAL,CAAUmB,aAAV,CAAwBC,CAAxD,EAA2D,GAA3D,EAAgE,KAAKpB,IAAL,CAAUmB,aAAV,CAAwBE,CAAxF;AACAN,cAAAA,cAAc,CAACO,OAAf,GAAyB,KAAKC,aAAL,CAAmBC,QAAnB,EAAzB;AAEA,kBAAIC,mBAAwB,GAAG,IAA/B,CATkG,CAUlG;;AACA,sBAAQ,KAAKnB,SAAL,CAAeC,EAAvB;AACI,qBAAK;AAAA;AAAA,0CAASC,aAAT,CAAuBkB,WAA5B;AACIX,kBAAAA,cAAc,CAACG,gBAAf,CAAgC,KAAKS,kBAAL,CAAwBR,aAAxB,CAAsCC,CAAtE,EAAyE,GAAzE,EAA8E,KAAKO,kBAAL,CAAwBR,aAAxB,CAAsCE,CAApH;AACAI,kBAAAA,mBAAmB,GAAGV,cAAc,CAACa,YAAf;AAAA;AAAA,+CAAtB;AACAH,kBAAAA,mBAAmB,CAACjD,IAApB,CAAyB,KAAK8B,SAA9B,EAAyC,KAAK7B,QAA9C,EAAwD,IAAxD;AACA;;AACJ,qBAAK;AAAA;AAAA,0CAAS+B,aAAT,CAAuBqB,SAA5B;AACId,kBAAAA,cAAc,CAACG,gBAAf,CAAgC,KAAKS,kBAAL,CAAwBR,aAAxD;AACAM,kBAAAA,mBAAmB,GAAGV,cAAc,CAACa,YAAf;AAAA;AAAA,2CAAtB;AACAH,kBAAAA,mBAAmB,CAACjD,IAApB,CAAyB,KAAK8B,SAA9B,EAAyC,KAAK7B,QAA9C,EAAwD,IAAxD;AACA;;AACJ,qBAAK;AAAA;AAAA,0CAAS+B,aAAT,CAAuBsB,UAA5B;AACIf,kBAAAA,cAAc,CAACgB,QAAf,CAAwBC,OAAxB,CAAgC,CAACC,OAAD,EAAgBC,GAAhB,KAA8B;AAC1D,wBAAIT,mBAAmB,GAAGQ,OAAO,CAACL,YAAR;AAAA;AAAA,iDAA1B;AACAH,oBAAAA,mBAAmB,CAACjD,IAApB,CAAyB,KAAK8B,SAA9B,EAAyC,KAAK7B,QAA9C;AACH,mBAHD;AAIA;;AACJ,qBAAK;AAAA;AAAA,0CAAS+B,aAAT,CAAuB2B,OAA5B;AACIpB,kBAAAA,cAAc,CAACG,gBAAf,CAAgC,KAAKS,kBAAL,CAAwBR,aAAxD;AACAM,kBAAAA,mBAAmB,GAAGV,cAAc,CAACa,YAAf;AAAA;AAAA,yCAAtB;AACAH,kBAAAA,mBAAmB,CAACjD,IAApB,CAAyB,KAAK8B,SAA9B,EAAyC,KAAK7B,QAA9C,EAAwD,IAAxD;AACA;;AACJ,qBAAK;AAAA;AAAA,0CAAS+B,aAAT,CAAuB4B,aAA5B;AACIX,kBAAAA,mBAAmB,GAAGV,cAAc,CAACa,YAAf;AAAA;AAAA,iDAAtB;AACAH,kBAAAA,mBAAmB,CAACjD,IAApB,CAAyB,KAAK8B,SAA9B,EAAyC,KAAK7B,QAA9C,EAAwD,IAAxD;AACA;;AACJ,qBAAK;AAAA;AAAA,0CAAS+B,aAAT,CAAuB6B,mBAA5B;AACItB,kBAAAA,cAAc,CAACgB,QAAf,CAAwBC,OAAxB,CAAiCC,OAAD,IAAiB;AAC7C,wBAAIR,mBAAmB,GAAGQ,OAAO,CAACL,YAAR;AAAA;AAAA,iEAA1B;AACAH,oBAAAA,mBAAmB,CAACjD,IAApB,CAAyB,KAAK8B,SAA9B,EAAyC,KAAK7B,QAA9C;AACH,mBAHD;AAIA;;AACJ,qBAAK;AAAA;AAAA,0CAAS+B,aAAT,CAAuB8B,KAA5B;AACIvB,kBAAAA,cAAc,CAACG,gBAAf,CAAgC,KAAKS,kBAAL,CAAwBR,aAAxD;AACAM,kBAAAA,mBAAmB,GAAGV,cAAc,CAACa,YAAf;AAAA;AAAA,qCAAtB;AACAH,kBAAAA,mBAAmB,CAACjD,IAApB,CAAyB,KAAK8B,SAA9B,EAAyC,KAAK7B,QAA9C,EAAwD,IAAxD;AACA;AApCR;;AAuCA,mBAAK8D,aAAL;AACH,aAnDD;AAoDH,WAvDD,MAuDO,IAAI,CAAC5C,cAAD,IAAmB,KAAKW,SAAL,CAAeC,EAAf,KAAsB;AAAA;AAAA,oCAASC,aAAT,CAAuBC,SAApE,EAA+E;AAClF,iBAAKlC,iBAAL,GAAyB,IAAzB;AAEA;AAAA;AAAA,8CAAamC,aAAb,CAA4B,GAAE,KAAKJ,SAAL,CAAeK,OAAQ,IAAG,KAAKL,SAAL,CAAeK,OAAQ,EAA/E,EAAkFC,IAAlF,CAAwFC,MAAD,IAAe;AAAA;;AAClG,kBAAI,KAAKC,QAAT,EAAmB;AACf;AACH;;AAED,kBAAIC,cAAc,GAAG;AAAA;AAAA,8CAAYxB,QAAZ,CAAqByB,OAArB,CAA6BH,MAA7B,EAAsC,KAAKc,kBAA3C,CAArB;AACAZ,cAAAA,cAAc,CAACyB,WAAf,GAA6B,KAAKlE,cAAlC;AAEA,kBAAI2D,OAAO,GAAGlB,cAAc,CAAC0B,cAAf,CAA8B,aAA9B,CAAd;AACAR,cAAAA,OAAO,CAACS,MAAR,GAAiB,IAAjB;AAEA,kBAAIjB,mBAAmB,GAAGV,cAAc,CAACa,YAAf;AAAA;AAAA,uCAA1B;AACA;AAAA;AAAA,kDAAcrC,QAAd,CAAuBoD,YAAvB,CAAoC5B,cAApC;AAEAU,cAAAA,mBAAmB,CAACjD,IAApB,CAAyB,KAAK8B,SAA9B,EAAyC,KAAK7B,QAA9C,EAAwD,IAAxD;AAEA;AAAA;AAAA,gDAAac,QAAb,CAAsBqD,SAAtB,CAAgC;AAAA;AAAA,wCAASC,KAAT,CAAeC,QAA/C;AAEA,kBAAIC,WAAsC,GAAEhC,cAAc,CAACiC,uBAAf,CAAuCtG,uBAAvC,CAA5C;AACAqG,cAAAA,WAAW,CAACf,OAAZ,CAAqBiB,OAAD,IAAmC;AACnDA,gBAAAA,OAAO,CAACC,eAAR,GAA0B,CAA1B;AACAD,gBAAAA,OAAO,QAAP,YAAAA,OAAO,CAAEE,KAAT;AACAF,gBAAAA,OAAO,QAAP,YAAAA,OAAO,CAAEG,IAAT;AACAH,gBAAAA,OAAO,QAAP,YAAAA,OAAO,CAAEI,IAAT;AACH,eALD,EAnBkG,CA0BlG;;AACA,kBAAIC,MAAM,GAAGvC,cAAc,CAACa,YAAf,CAA4B/E,kBAA5B,CAAb;AACA,kBAAI0G,QAAJ;AACA,kBAAIC,OAAO,0BAAGF,MAAM,CAACG,WAAV,qBAAG,oBAAoBC,IAAlC;;AACA,kBAAIF,OAAJ,EAAa;AACTF,gBAAAA,MAAM,CAACK,QAAP,CAAgBH,OAAhB,EAAyBI,IAAzB,GAAgC,CAAhC;AACAN,gBAAAA,MAAM,CAACK,QAAP,CAAgBH,OAAhB,EAAyBK,MAAzB;AACAP,gBAAAA,MAAM,CAACD,IAAP;AAEAE,gBAAAA,QAAQ,GAAGD,MAAM,CAACK,QAAP,CAAgBH,OAAhB,CAAX;AACAD,gBAAAA,QAAQ,CAACO,KAAT,GAAiB;AAAA;AAAA,gDAAYC,SAA7B;AACH;;AAEDT,cAAAA,MAAM,CAACU,IAAP,CAAYnH,kBAAkB,CAACoH,SAAnB,CAA6BC,QAAzC,EAAmD,MAAI;AACnDjC,gBAAAA,OAAO,CAACS,MAAR,GAAiB,KAAjB;AACH,eAFD;AAIA,0CAAKyB,aAAL,yCAAoBC,WAApB;AAEAC,cAAAA,UAAU,CAAC,MAAI;AACX;AAAA;AAAA,gDAAY9E,QAAZ,CAAqB+E,OAArB,CAA6BvD,cAA7B;AACH,eAFS,EAEP,IAFO,CAAV;;AAIA,mBAAKwB,aAAL;AACH,aAlDD;AAmDH;AACJ;AAED;AACJ;AACA;AACA;AACA;;;AACWgC,QAAAA,eAAe,GAAI;AACtB,cAAI,KAAKlG,UAAL,IAAmB,CAAvB,EAA0B;AAAA;;AACtB,sCAAKS,UAAL,uCAAiBC,WAAjB,CAA6B,KAAKyF,YAAlC,EAAgD,CAAhD;AACA,iBAAKnG,UAAL,GAAkB,GAAlB;AACH;AACJ;;AAEDoG,QAAAA,UAAU,CAAEC,SAAF,EAAqB;AAC3B,cAAI,KAAKrG,UAAL,GAAkB,CAAlB,IAAuB,CAAC,KAAKsG,KAAjC,EAAwC;AACpC,iBAAKtG,UAAL,IAAmBqG,SAAnB;;AAEA,gBAAI,KAAKrG,UAAL,IAAmB,CAAvB,EAA0B;AAAA;;AACtB,wCAAKS,UAAL,uCAAiBC,WAAjB,CAA6B,KAAKC,SAAlC,EAA6C,CAA7C;AACH;AACJ;AACJ;;AA/L6B,O;;;;;iBAEI,I;;;;;;;iBAGL,I;;;;;;;iBAGG,I;;;;;;;iBAGE,I","sourcesContent":["import { Monster } from './monster';\nimport { ClientEvent } from './../framework/clientEvent';\nimport { UIManager } from './../framework/uiManager';\nimport { Node, ParticleSystemComponent, Vec3, _decorator, AnimationComponent, AnimationState, Material, MeshRenderer } from 'cc';\nimport { Constant } from '../framework/constant';\nimport { EffectManager } from '../framework/effectManager';\nimport { GameManager } from './gameManager';\nimport { ResourceUtil } from '../framework/resourceUtil';\nimport { JetFires } from './monsterSkill/jetFires';\nimport { EnergyBall } from './monsterSkill/energyBall';\nimport { FireBall } from './monsterSkill/fireBall';\nimport { Dispersion } from './monsterSkill/dispersion';\nimport { Tornado } from './monsterSkill/tornado';\nimport { FireBallBig } from './monsterSkill/fireBallBig';\nimport { DispersionSurround } from './monsterSkill/dispersionSurround';\nimport { Laser } from './monsterSkill/laser';\nimport { AudioManager } from '../framework/audioManager';\nimport { Util } from '../framework/util';\nimport { PoolManager } from '../framework/poolManager';\nconst { ccclass, property } = _decorator;\n//大龙boss脚本, 继承monster.ts\n@ccclass('Boss')\nexport class Boss extends Monster {\n    @property(Node)\n    public ndSocketDragonHead: Node = null!;//龙头    \n\n    @property(Material)\n    public matDragon: Material = null!;//大龙默认材质\n\n    @property(Material)\n    public matDragonHit: Material = null!;//大龙受击后材质变白\n\n    @property(MeshRenderer)\n    public meshDragon: MeshRenderer = null!;\n\n    private _countdown: number = 0.2;//闪白倒计时\n    private _oriSkillEuler: Vec3 = new Vec3();//技能默认角度\n    private _isSkillReleasing: boolean = false;//是否正在释放技能 \n\n    public init(baseInfo: any, layerInfo: any) {\n        super.init(baseInfo, layerInfo);\n\n        this._bloodTipOffsetPos.set(0, 50, 0);\n        this._hitEffectPos.set(0, 0.04, 0);\n        this._isSkillReleasing = false;\n        this._countdown = 0.2;\n        this.meshDragon?.setMaterial(this.matDragon, 0);\n    }\n\n    public refreshBlood (bloodNum: number, tipType: number) {\n        ClientEvent.dispatchEvent(Constant.EVENT_TYPE.REFRESH_BOSS_BLOOD, bloodNum);\n        UIManager.instance.showBloodTips(this, tipType, bloodNum, this._bloodTipOffsetPos);\n    }\n\n    public playAttackAni () {\n        super.playAttackAni();\n        \n        this._isSkillReleasing = false;\n    }\n\n    /**\n     * 向玩家释放技能\n     *\n     * @param {boolean} [isNormalAttack=false] 是否是普通攻击、反之喷火\n     * @return {*} \n     * @memberof Boss\n     */\n    public releaseSkillToPlayer (isNormalAttack: boolean = false) {\n        if (this._isSkillReleasing) {\n            return;\n        }\n\n        //boss是非近战的怪物，必须带技能，这里做个容错\n        if (!this.allSkillInfo.length) {\n            let offsetLength = Util.getTwoNodeXZLength(this.node, GameManager.ndPlayer);\n            if (offsetLength <= this._minLength * this._minLengthRatio) {\n                GameManager.scriptPlayer.reduceBlood(this.baseInfo);\n            }\n            return;\n        }\n\n        if (isNormalAttack && this.skillInfo.ID !== Constant.MONSTER_SKILL.JET_FIRES) {\n            this._isSkillReleasing = true;\n\n            ResourceUtil.loadEffectRes(`${this.skillInfo.resName}/${this.skillInfo.resName}`).then((prefab: any)=>{\n                if (this.isMoving) {\n                    return;\n                }\n    \n                let ndMonsterSkill = PoolManager.instance.getNode(prefab, GameManager.ndGameManager as Node) as Node;\n                ndMonsterSkill.setWorldPosition(this.node.worldPosition.x, 2.5, this.node.worldPosition.z);\n                ndMonsterSkill.forward = this.attackForward.negative();\n                \n                let scriptSkillCollider: any = null!;\n                //怪物技能初始化\n                switch (this.skillInfo.ID) {\n                    case Constant.MONSTER_SKILL.ENERGY_BALL:\n                        ndMonsterSkill.setWorldPosition(this.ndSocketDragonHead.worldPosition.x, 2.5, this.ndSocketDragonHead.worldPosition.z);\n                        scriptSkillCollider = ndMonsterSkill.getComponent(EnergyBall) as EnergyBall;\n                        scriptSkillCollider.init(this.skillInfo, this.baseInfo, this);\n                        break;\n                    case Constant.MONSTER_SKILL.FIRE_BALL: \n                        ndMonsterSkill.setWorldPosition(this.ndSocketDragonHead.worldPosition);\n                        scriptSkillCollider = ndMonsterSkill.getComponent(FireBall) as FireBall;\n                        scriptSkillCollider.init(this.skillInfo, this.baseInfo, this);\n                        break;\n                    case Constant.MONSTER_SKILL.DISPERSION:\n                        ndMonsterSkill.children.forEach((ndChild: Node, idx: number)=>{\n                            let scriptSkillCollider = ndChild.getComponent(Dispersion) as Dispersion;\n                            scriptSkillCollider.init(this.skillInfo, this.baseInfo);\n                        })\n                        break;\n                    case Constant.MONSTER_SKILL.TORNADO: \n                        ndMonsterSkill.setWorldPosition(this.ndSocketDragonHead.worldPosition);\n                        scriptSkillCollider = ndMonsterSkill.getComponent(Tornado) as Tornado;\n                        scriptSkillCollider.init(this.skillInfo, this.baseInfo, this);\n                        break;\n                    case Constant.MONSTER_SKILL.FIRE_BALL_BIG:\n                        scriptSkillCollider = ndMonsterSkill.getComponent(FireBallBig) as FireBallBig;\n                        scriptSkillCollider.init(this.skillInfo, this.baseInfo, this);\n                        break;\n                    case Constant.MONSTER_SKILL.DISPERSION_SURROUND:\n                        ndMonsterSkill.children.forEach((ndChild: Node)=>{\n                            let scriptSkillCollider = ndChild.getComponent(DispersionSurround) as DispersionSurround;\n                            scriptSkillCollider.init(this.skillInfo, this.baseInfo);\n                        })\n                        break;\n                    case Constant.MONSTER_SKILL.LASER:\n                        ndMonsterSkill.setWorldPosition(this.ndSocketDragonHead.worldPosition);\n                        scriptSkillCollider = ndMonsterSkill.getComponent(Laser) as Laser;\n                        scriptSkillCollider.init(this.skillInfo, this.baseInfo, this);\n                        break;\n                }\n    \n                this._refreshSkill();\n            })\n        } else if (!isNormalAttack && this.skillInfo.ID === Constant.MONSTER_SKILL.JET_FIRES) {\n            this._isSkillReleasing = true;\n\n            ResourceUtil.loadEffectRes(`${this.skillInfo.resName}/${this.skillInfo.resName}`).then((prefab: any)=>{\n                if (this.isMoving) {\n                    return;\n                }\n    \n                let ndMonsterSkill = PoolManager.instance.getNode(prefab,  this.ndSocketDragonHead) as Node;\n                ndMonsterSkill.eulerAngles = this._oriSkillEuler;\n\n                let ndChild = ndMonsterSkill.getChildByName(\"boxCollider\") as Node;\n                ndChild.active = true;\n    \n                let scriptSkillCollider = ndMonsterSkill.getComponent(JetFires) as JetFires;\n                EffectManager.instance.playParticle(ndMonsterSkill);\n\n                scriptSkillCollider.init(this.skillInfo, this.baseInfo, this);\n\n                AudioManager.instance.playSound(Constant.SOUND.JET_FIRE);\n    \n                let arrParticle: ParticleSystemComponent[]= ndMonsterSkill.getComponentsInChildren(ParticleSystemComponent);\n                arrParticle.forEach((element:ParticleSystemComponent)=>{\n                    element.simulationSpeed = 1;\n                    element?.clear();\n                    element?.stop();\n                    element?.play();\n                })\n    \n                //播放触发器动画            \n                let aniCom = ndMonsterSkill.getComponent(AnimationComponent) as AnimationComponent;\n                let aniState: AnimationState;\n                let aniName = aniCom.defaultClip?.name;\n                if (aniName) {\n                    aniCom.getState(aniName).time = 0;\n                    aniCom.getState(aniName).sample();\n                    aniCom.play();    \n    \n                    aniState = aniCom.getState(aniName);\n                    aniState.speed = GameManager.gameSpeed;\n                }\n    \n                aniCom.once(AnimationComponent.EventType.FINISHED, ()=>{\n                    ndChild.active = false;\n                })\n    \n                this.scriptWarning?.hideWarning();   \n                \n                setTimeout(()=>{\n                    PoolManager.instance.putNode(ndMonsterSkill);\n                }, 4000)  \n\n                this._refreshSkill();\n            })\n        }\n    }\n\n    /**\n     * 大龙受击打后闪白效果\n     *\n     * @memberof Boss\n     */\n    public changeDragonMat () {\n        if (this._countdown <= 0) {\n            this.meshDragon?.setMaterial(this.matDragonHit, 0);\n            this._countdown = 0.2;\n        }\n    }\n\n    lateUpdate (deltaTime: number) {\n        if (this._countdown > 0 && !this.isDie) {\n            this._countdown -= deltaTime;\n\n            if (this._countdown <= 0) {\n                this.meshDragon?.setMaterial(this.matDragon, 0);\n            }\n        }\n    }\n}\n"]}
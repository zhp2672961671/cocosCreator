{"version":3,"sources":["file:///E:/myCocosGame/youmingArcher/assets/script/fight/monsterSkill/laser.ts"],"names":["_decorator","Component","EffectManager","Constant","AudioManager","ccclass","property","Laser","skillInfo","baseInfo","scriptWarning","timer","start","init","scriptParent","node","active","_closeTimer","setTimeout","isDie","instance","playSound","SOUND","LASER","hideWarning","playParticle","flySpeed","clearTimeout"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;;AADZC,MAAAA,a,iBAAAA,a;;AAEAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,Y,iBAAAA,Y;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U,GAC9B;;uBAEaO,K,WADZF,OAAO,CAAC,OAAD,C,gBAAR,MACaE,KADb,SAC2BN,SAD3B,CACqC;AAAA;AAAA;AAAA,eAC1BO,SAD0B,GACT,IADS;AAAA,eAE1BC,QAF0B,GAEV,IAFU;AAAA,eAG1BC,aAH0B,GAGL,IAHK;AAAA,eAKzBC,KALyB,GAKZ,IALY;AAAA;;AAKN;AAE3BC,QAAAA,KAAK,GAAI,CACL;AACH;;AAEMC,QAAAA,IAAI,CAAEL,SAAF,EAAkBC,QAAlB,EAAiCK,YAAjC,EAAqD;AAC5D,eAAKN,SAAL,GAAiBA,SAAjB;AACA,eAAKC,QAAL,GAAgBA,QAAhB;AACA,eAAKM,IAAL,CAAUC,MAAV,GAAmB,KAAnB;;AACA,eAAKC,WAAL;;AAEA,eAAKN,KAAL,GAAaO,UAAU,CAAC,MAAI;AACxB,gBAAI,CAACJ,YAAY,CAACK,KAAlB,EAAyB;AAAA;;AACrB;AAAA;AAAA,gDAAaC,QAAb,CAAsBC,SAAtB,CAAgC;AAAA;AAAA,wCAASC,KAAT,CAAeC,KAA/C;AACA,mBAAKR,IAAL,CAAUC,MAAV,GAAmB,IAAnB;AACAF,cAAAA,YAAY,QAAZ,qCAAAA,YAAY,CAAEJ,aAAd,2CAA6Bc,WAA7B;AACA;AAAA;AAAA,kDAAcJ,QAAd,CAAuBK,YAAvB,CAAoC,KAAKV,IAAzC,EAA+CP,SAAS,CAACkB,QAAzD,EAAmE,IAAnE,EAAyE,IAAzE,EAA+E,MAAI;AAC/E,qBAAKT,WAAL;AACH,eAFD;AAGH,aAPD,MAOO;AACH,mBAAKA,WAAL;AACH;AACJ,WAXsB,EAWpB,GAXoB,CAAvB;AAYH;;AAEOA,QAAAA,WAAW,GAAI;AACnB,cAAI,KAAKN,KAAT,EAAgB;AACZgB,YAAAA,YAAY,CAAC,KAAKhB,KAAN,CAAZ;AACA,iBAAKA,KAAL,GAAa,IAAb;AACH;AACJ,SApCgC,CAsCjC;AACA;AACA;;;AAxCiC,O","sourcesContent":["import { EffectManager } from './../../framework/effectManager';\nimport { _decorator, Component } from 'cc';\nimport { Constant } from '../../framework/constant';\nimport { AudioManager } from '../../framework/audioManager';\nconst { ccclass, property } = _decorator;\n//激光技能脚本\n@ccclass('Laser')\nexport class Laser extends Component {\n    public skillInfo: any = null!;//技能信息\n    public baseInfo: any = null!;//基础信息\n    public scriptWarning: any = null!;//预警技能脚本\n\n    private timer: any = null!;//定时器\n\n    start () {\n        // [3]\n    }\n\n    public init (skillInfo: any, baseInfo: any, scriptParent?: any) {\n        this.skillInfo = skillInfo;\n        this.baseInfo = baseInfo;\n        this.node.active = false;\n        this._closeTimer();\n\n        this.timer = setTimeout(()=>{\n            if (!scriptParent.isDie) {\n                AudioManager.instance.playSound(Constant.SOUND.LASER);  \n                this.node.active = true;\n                scriptParent?.scriptWarning?.hideWarning();\n                EffectManager.instance.playParticle(this.node, skillInfo.flySpeed, true, null, ()=>{\n                    this._closeTimer();\n                });\n            } else {\n                this._closeTimer();\n            }\n        }, 400)\n    }\n\n    private _closeTimer () {\n        if (this.timer) {\n            clearTimeout(this.timer);\n            this.timer = null!;\n        }\n    }\n\n    // update (deltaTime: number) {\n    //     // [4]\n    // }\n}"]}
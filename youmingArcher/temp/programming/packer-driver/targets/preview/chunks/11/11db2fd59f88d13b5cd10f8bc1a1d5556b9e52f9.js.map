{"version":3,"sources":["file:///E:/myCocosGame/youmingArcher/assets/script/ui/debug/debugLevelItem.ts"],"names":["_decorator","Component","LabelComponent","SpriteComponent","Color","Constant","UIManager","PlayerData","ClientEvent","AudioManager","ccclass","property","DebugLevelItem","_colorSelected","fromHEX","_colorUnSelected","_isSelected","_level","_itemInfo","onEnable","on","EVENT_TYPE","HIDE_DEBUG_LEVEL_SELECTED","_hideDebugLevelSelected","onDisable","off","start","init","itemInfo","ID","lbLevelTxt","string","_refreshState","instance","playerInfo","level","spCom","color","onBtnClick","playSound","SOUND","CLICK","dispatchEvent","RECYCLE_ALL","Number","savePlayerInfoToLocalCache","ON_GAME_INIT","hideDialog"],"mappings":"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","sourcesContent":["import { Constant } from './../../framework/constant';\nimport { UIManager } from './../../framework/uiManager';\nimport { PlayerData } from './../../framework/playerData';\nimport { _decorator, Component, LabelComponent, SpriteComponent, Color } from 'cc';\nimport { ClientEvent } from '../../framework/clientEvent';\nimport { AudioManager } from '../../framework/audioManager';\nconst { ccclass, property } = _decorator;\n//调试关卡等级脚本\n@ccclass('DebugLevelItem')\nexport class DebugLevelItem extends Component {\n    @property(LabelComponent)\n    public lbLevelTxt: LabelComponent = null!;//等级文本组件\n\n    @property(SpriteComponent)\n    public spCom: SpriteComponent = null!;//图标组件\n\n    private _colorSelected: Color = new Color().fromHEX(\"#3CE649\");//选中\n    private _colorUnSelected: Color = new Color().fromHEX(\"#ffffff\");//未选中\n    private _isSelected: boolean = false;//是否选中\n    private _level: number = 0;//等级\n    private _itemInfo: any = null!;//自节点数据\n\n    onEnable () {\n        ClientEvent.on(Constant.EVENT_TYPE.HIDE_DEBUG_LEVEL_SELECTED, this._hideDebugLevelSelected, this);\n    }\n\n    onDisable () {\n        ClientEvent.off(Constant.EVENT_TYPE.HIDE_DEBUG_LEVEL_SELECTED, this._hideDebugLevelSelected, this);\n    }\n\n    start () {\n        // [3]\n    }\n\n    /**\n     *  初始化\n     *\n     * @param {*} itemInfo\n     * @memberof DebugLevelItem\n     */\n    public init (itemInfo: any) {\n        this._level = itemInfo.ID;\n        this.lbLevelTxt.string = `${this._level}`;\n        this._itemInfo = itemInfo;\n        this._refreshState();\n    }\n\n    /**\n     * 切换选中与非选中状态\n     *\n     * @private\n     * @memberof DebugSkillItem\n     */\n    private _refreshState () {\n        this._isSelected = PlayerData.instance.playerInfo.level === this._itemInfo.ID;\n        if (this._isSelected) {\n            this.spCom.color = this._colorSelected;\n        } else {\n            this.spCom.color = this._colorUnSelected;\n        }\n    }\n\n    /**\n     * 点击按钮\n     */\n    public onBtnClick () {\n        AudioManager.instance.playSound(Constant.SOUND.CLICK);\n\n        ClientEvent.dispatchEvent(Constant.EVENT_TYPE.HIDE_DEBUG_LEVEL_SELECTED);\n        this._isSelected = true;\n        this._refreshState();\n        \n        ClientEvent.dispatchEvent(Constant.EVENT_TYPE.RECYCLE_ALL);\n\n        PlayerData.instance.playerInfo.level = Number(this._level);\n        PlayerData.instance.savePlayerInfoToLocalCache();\n        ClientEvent.dispatchEvent(Constant.EVENT_TYPE.ON_GAME_INIT);\n        UIManager.instance.hideDialog(\"debug/debugPanel\");\n    }\n\n    /**\n     * 隐藏选中状态\n     *\n     * @private\n     * @memberof DebugLevelItem\n     */\n    private _hideDebugLevelSelected () {\n        this._isSelected = false;\n        this._refreshState();\n    }\n\n    // update (deltaTime: number) {\n    //     // [4]\n    // }\n}"]}
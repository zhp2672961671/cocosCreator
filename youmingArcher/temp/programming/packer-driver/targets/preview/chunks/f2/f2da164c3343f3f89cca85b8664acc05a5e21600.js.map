{"version":3,"sources":["file:///E:/myCocosGame/youmingArcher/assets/script/fight/monsterSkill/fireBallBig.ts"],"names":["_decorator","Component","tween","Constant","EffectManager","ResourceUtil","AudioManager","PoolManager","GameManager","ccclass","property","FireBallBig","scriptWarning","isPlayHitFireBall","skillInfo","baseInfo","start","init","scriptParent","playerWorPos","attackPos","node","setWorldPosition","x","z","children","forEach","ndChild","active","instance","playParticle","to","flySpeed","position","easing","call","playSound","SOUND","FIRE_BALL_BIG","hideWarning","loadEffectRes","then","prefab","ndEffect","getNode","worldPosition","gameSpeed","putNode"],"mappings":"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","sourcesContent":["import { Constant } from './../../framework/constant';\nimport { _decorator, Component, Node, tween, Prefab } from 'cc';\nimport { EffectManager } from '../../framework/effectManager';\nimport { ResourceUtil } from '../../framework/resourceUtil';\nimport { AudioManager } from '../../framework/audioManager';\nimport { PoolManager } from '../../framework/poolManager';\nimport { GameManager } from '../gameManager';\nconst { ccclass, property } = _decorator;\n//大火球脚本: 炸开的时候才有伤害，跟小火球一样\n@ccclass('FireBallBig')\nexport class FireBallBig extends Component {\n    public scriptWarning: any = null!;//预警技能脚本\n    public isPlayHitFireBall: boolean = false;//是否开始播放爆炸特效\n    public skillInfo: any = null!;//技能信息\n    public baseInfo: any = null!;//敌人基本信息\n\n    start () {\n        // [3]\n    }\n\n    public init (skillInfo: any, baseInfo: any, scriptParent?: any) {\n        this.skillInfo = skillInfo;\n        this.baseInfo = baseInfo;\n        this.isPlayHitFireBall = false;\n\n        let playerWorPos = scriptParent.attackPos;\n        this.node.setWorldPosition(playerWorPos.x, 23, playerWorPos.z);\n\n        this.node.children.forEach((ndChild: Node)=>{\n            ndChild.active = true;\n        })\n\n        EffectManager.instance.playParticle(this.node);\n\n        tween(this.node)\n        .to(1 / skillInfo.flySpeed, {position: playerWorPos}, {easing: \"elasticIn\"})\n        .call(()=>{\n            AudioManager.instance.playSound(Constant.SOUND.FIRE_BALL_BIG);  \n\n            this.isPlayHitFireBall = true;\n            //关闭预警\n            scriptParent?.scriptWarning?.hideWarning();\n\n            this.node.children.forEach((ndChild: Node)=>{\n                ndChild.active = false;\n            })\n\n            // console.log(\"大火球碰到地面\");\n\n            ResourceUtil.loadEffectRes(\"hit/hitFireBall2\").then((prefab: any)=>{\n                let ndEffect: Node = PoolManager.instance.getNode(prefab as Prefab, this.node) as Node;\n                ndEffect.setWorldPosition(this.node.worldPosition);  \n\n                EffectManager.instance.playParticle(ndEffect, GameManager.gameSpeed, true, 1.1, ()=>{\n                    PoolManager.instance.putNode(ndEffect);\n                    PoolManager.instance.putNode(this.node);\n                });\n            })\n        })\n        .start()\n    }\n}"]}
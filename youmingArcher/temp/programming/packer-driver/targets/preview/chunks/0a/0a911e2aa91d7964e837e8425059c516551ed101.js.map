{"version":3,"sources":["file:///E:/myCocosGame/youmingArcher/assets/script/ui/debug/debugSkillItem.ts"],"names":["_decorator","Component","LabelComponent","SpriteComponent","Color","PlayerData","Constant","GameManager","EffectManager","AudioManager","ccclass","property","DebugSkillItem","_colorSelected","fromHEX","_colorUnSelected","_isSelected","_itemInfo","start","init","itemInfo","lbLevelTxt","string","name","_changeState","instance","playerInfo","arrSkill","includes","ID","spCom","color","onBtnClick","playSound","SOUND","GET_SKILL","reducePlayerSkill","addPlayerSkill","loadAndPlayEffect","ndPlayer","gameSpeed"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,c,OAAAA,c;AAAgBC,MAAAA,e,OAAAA,e;AAAiBC,MAAAA,K,OAAAA,K;;AAD9DC,MAAAA,U,iBAAAA,U;;AAEAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,a,iBAAAA,a;;AACAC,MAAAA,Y,iBAAAA,Y;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBX,U,GAC9B;;gCAEaY,c,WADZF,OAAO,CAAC,gBAAD,C,UAEHC,QAAQ,CAACT,cAAD,C,UAGRS,QAAQ,CAACR,eAAD,C,2BALb,MACaS,cADb,SACoCX,SADpC,CAC8C;AAAA;AAAA;;AAAA;;AAAA;;AAAA,eAOlCY,cAPkC,GAOV,IAAIT,KAAJ,GAAYU,OAAZ,CAAoB,SAApB,CAPU;AAAA,eAQlCC,gBARkC,GAQR,IAAIX,KAAJ,GAAYU,OAAZ,CAAoB,SAApB,CARQ;AAAA,eASlCE,WATkC,GASX,KATW;AAAA,eAUlCC,SAVkC,GAUjB,IAViB;AAAA;;AAUX;AAE/BC,QAAAA,KAAK,GAAI,CACL;AACH;;AAEMC,QAAAA,IAAI,CAAEC,QAAF,EAAiB;AACxB,eAAKC,UAAL,CAAgBC,MAAhB,GAAyBF,QAAQ,CAACG,IAAlC;AACA,eAAKN,SAAL,GAAiBG,QAAjB;;AACA,eAAKI,YAAL;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;;;AACYA,QAAAA,YAAY,GAAI;AACpB,eAAKR,WAAL,GAAmB;AAAA;AAAA,wCAAWS,QAAX,CAAoBC,UAApB,CAA+BC,QAA/B,CAAwCC,QAAxC,CAAiD,KAAKX,SAAL,CAAeY,EAAhE,CAAnB;;AAEA,cAAI,KAAKb,WAAT,EAAsB;AAClB,iBAAKc,KAAL,CAAWC,KAAX,GAAmB,KAAKlB,cAAxB;AACH,WAFD,MAEO;AACH,iBAAKiB,KAAL,CAAWC,KAAX,GAAmB,KAAKhB,gBAAxB;AACH;AACJ;;AAEMiB,QAAAA,UAAU,GAAI;AACjB;AAAA;AAAA,4CAAaP,QAAb,CAAsBQ,SAAtB,CAAgC;AAAA;AAAA,oCAASC,KAAT,CAAeC,SAA/C;;AAEA,cAAI,KAAKnB,WAAT,EAAsB;AAClB;AAAA;AAAA,0CAAWS,QAAX,CAAoBW,iBAApB,CAAsC,KAAKnB,SAA3C;AACH,WAFD,MAEO;AACH;AAAA;AAAA,0CAAWQ,QAAX,CAAoBY,cAApB,CAAmC,KAAKpB,SAAxC;AACA;AAAA;AAAA,gDAAcQ,QAAd,CAAuBa,iBAAvB,CAAyC,IAAzC,EAA+C;AAAA;AAAA,4CAAYC,QAA3D,EAAqE,iBAArE,EAAwF,CAAxF,EAA2F,IAA3F,EAAiG,IAAjG,EAAuG,KAAvG,EAA8G,IAA9G,EAAoH;AAAA;AAAA,4CAAYC,SAAhI,EAA2I,IAA3I;AACH;;AAED,eAAKhB,YAAL;AACH,SAjDyC,CAoD1C;AACA;AACA;;;AAtD0C,O;;;;;iBAEN,I;;;;;;;iBAGJ,I;;;AAoDpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import { PlayerData } from './../../framework/playerData';\nimport { _decorator, Component, Node, LabelComponent, SpriteComponent, Color } from 'cc';\nimport { Constant } from '../../framework/constant';\nimport { GameManager } from '../../fight/gameManager';\nimport { EffectManager } from '../../framework/effectManager';\nimport { AudioManager } from '../../framework/audioManager';\nconst { ccclass, property } = _decorator;\n//调试单个选项脚本\n@ccclass('DebugSkillItem')\nexport class DebugSkillItem extends Component {\n    @property(LabelComponent)\n    public lbLevelTxt: LabelComponent = null!;//等级文本组件\n\n    @property(SpriteComponent)\n    public spCom: SpriteComponent = null!;//图标组件\n\n    private _colorSelected: Color = new Color().fromHEX(\"#3CE649\");//选中\n    private _colorUnSelected: Color = new Color().fromHEX(\"#ffffff\");//未选中\n    private _isSelected: boolean = false;//是否选中\n    private _itemInfo: any = null!;//子节点数据\n\n    start () {\n        // [3]\n    }\n\n    public init (itemInfo: any) {\n        this.lbLevelTxt.string = itemInfo.name;\n        this._itemInfo = itemInfo;      \n        this._changeState();\n    }\n\n    /**\n     * 切换选中与非选中状态\n     *\n     * @private\n     * @memberof DebugSkillItem\n     */\n    private _changeState () {\n        this._isSelected = PlayerData.instance.playerInfo.arrSkill.includes(this._itemInfo.ID);\n\n        if (this._isSelected) {\n            this.spCom.color = this._colorSelected;\n        } else {\n            this.spCom.color = this._colorUnSelected;\n        }\n    }\n\n    public onBtnClick () {\n        AudioManager.instance.playSound(Constant.SOUND.GET_SKILL);\n\n        if (this._isSelected) {\n            PlayerData.instance.reducePlayerSkill(this._itemInfo);\n        } else {\n            PlayerData.instance.addPlayerSkill(this._itemInfo);\n            EffectManager.instance.loadAndPlayEffect(true, GameManager.ndPlayer, \"levelUp/levelUp\", 1, null, null, false, true, GameManager.gameSpeed, true);\n        }\n\n        this._changeState();\n    }\n\n\n    // update (deltaTime: number) {\n    //     // [4]\n    // }\n}\n\n/**\n * [1] Class member could be defined like this.\n * [2] Use `property` decorator if your want the member to be serializable.\n * [3] Your initialization goes here.\n * [4] Your update function goes here.\n *\n * Learn more about scripting: https://docs.cocos.com/creator/3.0/manual/en/scripting/\n * Learn more about CCClass: https://docs.cocos.com/creator/3.0/manual/en/scripting/ccclass.html\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.0/manual/en/scripting/life-cycle-callbacks.html\n */\n"]}
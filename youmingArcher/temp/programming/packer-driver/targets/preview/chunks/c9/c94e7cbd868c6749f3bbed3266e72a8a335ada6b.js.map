{"version":3,"sources":["file:///E:/myCocosGame/youmingArcher/assets/script/fight/monsterSkillCollider.ts"],"names":["_decorator","Component","MeshColliderComponent","BoxColliderComponent","CylinderColliderComponent","Enum","CapsuleColliderComponent","SphereCollider","GameManager","Constant","DispersionSurround","Dispersion","EnergyBall","JetFires","FireBall","FireBallBig","Laser","Tornado","PoolManager","ccclass","property","COLLIDER_NAME","ENERGY_BALL","FIRE_BALL","JET_FIRES","DISPERSION","TORNADO","FIRE_BALL_BIG","DISPERSION_SURROUND","LASER","MonsterSkillCollider","type","displayOrder","colliderCom","ani","_isOnJetFires","_checkInterval","onLoad","node","getComponent","console","error","onEnable","colliderName","on","_onTriggerStayCb","_onTriggerExitCb","isTrigger","_onTriggerEnterCb","_onCollisionEnterCb","onDisable","off","start","init","event","_hitTarget","otherCollider","isGameOver","isGameStart","getGroup","PHY_GROUP","OBSTACLE","scriptSkillCollider","skillInfo","penetrate","instance","putNode","hide","parent","PLAYER","ndPlayer","_hitPlayer","baseInfo","warn","scriptPlayer","reduceBlood","update","deltaTime"],"mappings":"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","sourcesContent":["import { GameManager } from './gameManager';\nimport { _decorator, Component, MeshColliderComponent, Quat, BoxColliderComponent, CylinderColliderComponent, ITriggerEvent, Vec3, Enum, AnimationComponent, CapsuleColliderComponent, SphereCollider, Node, ICollisionEvent } from 'cc';\nimport { Constant } from '../framework/constant';\nimport { DispersionSurround } from './monsterSkill/dispersionSurround';\nimport { Dispersion } from './monsterSkill/dispersion';\nimport { EnergyBall } from './monsterSkill/energyBall';\nimport { JetFires } from './monsterSkill/jetFires';\nimport { FireBall } from './monsterSkill/fireBall';\nimport { FireBallBig } from './monsterSkill/fireBallBig';\nimport { Laser } from './monsterSkill/laser';\nimport { Tornado } from './monsterSkill/tornado';\nimport { PoolManager } from '../framework/poolManager';\n//怪物武器碰撞器/触发器脚本\nconst { ccclass, property } = _decorator;\n\nconst COLLIDER_NAME = Enum ({\n    ENERGY_BALL: 1,//直线飞行能量球\n    FIRE_BALL: 2,//线飞行的小火球\n    JET_FIRES: 3,//直线范围型的火焰\n    DISPERSION: 4,//180度散射\n    TORNADO: 5,//旋转前进的龙卷风\n    FIRE_BALL_BIG: 6,//直线下坠的大火团 \n    DISPERSION_SURROUND: 7,//360度六角形散射\n    LASER: 8,//直线激光\n})\n\n@ccclass('MonsterSkillCollider')\nexport class MonsterSkillCollider extends Component {\n    @property({\n        type: COLLIDER_NAME,\n        displayOrder: 1\n    })\n    public colliderName: any = COLLIDER_NAME.ENERGY_BALL;//碰撞体/触发器类型名称\n\n    public colliderCom: any = null;\n    public ani: AnimationComponent = null!;\n    \n    public static COLLIDER_NAME = COLLIDER_NAME;\n\n    private _isOnJetFires: boolean = false;//是否处在龙火焰中\n    private _checkInterval: number = 1;//大龙火焰检查间隔\n\n    onLoad () {\n        this.colliderCom = this.node.getComponent(BoxColliderComponent) || this.node.getComponent(CylinderColliderComponent) || this.node.getComponent(SphereCollider) ||this.node.getComponent(CapsuleColliderComponent) || this.node.getComponent(MeshColliderComponent) || this.node.getComponent(CylinderColliderComponent);\n\n        if (!this.colliderCom) {\n            console.error(\"this node does not have collider component\");\n        }\n    }\n\n    onEnable () {\n        if (this.colliderName === COLLIDER_NAME.JET_FIRES) {\n            this.colliderCom.on(\"onTriggerStay\", this._onTriggerStayCb, this);\n            this.colliderCom.on(\"onTriggerExit\", this._onTriggerExitCb, this);\n        } else {\n            if (this.colliderCom.isTrigger) {\n                this.colliderCom.on('onTriggerEnter', this._onTriggerEnterCb, this);\n            } else {\n                this.colliderCom.on('onCollisionEnter', this._onCollisionEnterCb, this);\n            }\n        }\n        \n    }\n\n    onDisable () {\n        if (this.colliderName === COLLIDER_NAME.JET_FIRES) {\n            this.colliderCom.off(\"onTriggerStay\", this._onTriggerStayCb, this);\n            this.colliderCom.off(\"onTriggerExit\", this._onTriggerExitCb, this);\n        } else {\n            if (this.colliderCom.isTrigger) {\n                this.colliderCom.off('onTriggerEnter', this._onTriggerEnterCb, this);\n            } else {\n                this.colliderCom.off('onCollisionEnter', this._onCollisionEnterCb, this);\n            }\n        }\n    }\n\n    start () {\n        this._isOnJetFires = false;\n    }\n\n    /**\n     * 初始化\n     */\n    public init () {\n\n    }   \n\n    private _onTriggerEnterCb (event: ITriggerEvent) {\n       this._hitTarget(event.otherCollider);\n    }\n\n    private _onCollisionEnterCb (event: ICollisionEvent) {\n       this._hitTarget(event.otherCollider);\n    }\n\n    private _hitTarget (otherCollider: any) {\n        if (GameManager.isGameOver || !GameManager.isGameStart) {\n            return;\n        }\n\n        if (otherCollider.getGroup() === Constant.PHY_GROUP.OBSTACLE) {\n            //技能碰到游戏中的障碍则回收\n            let scriptSkillCollider: any = null;\n\n            switch (this.colliderName) {\n                case COLLIDER_NAME.ENERGY_BALL:\n                    scriptSkillCollider = this.node.getComponent(EnergyBall) as EnergyBall;\n                    if (!scriptSkillCollider.skillInfo.penetrate) {\n                        PoolManager.instance.putNode(this.node);\n                    }\n                    break;\n                case COLLIDER_NAME.DISPERSION:\n                    scriptSkillCollider = this.node.getComponent(Dispersion) as Dispersion;\n                    if (!scriptSkillCollider.skillInfo.penetrate) {\n                        scriptSkillCollider.hide();\n                    }\n                    break;\n                case COLLIDER_NAME.TORNADO:\n                    scriptSkillCollider = this.node.parent?.getComponent(Tornado) as Tornado;\n                    if (!scriptSkillCollider.skillInfo.penetrate) {\n                        PoolManager.instance.putNode(this.node.parent as Node);\n                    }\n                    break;\n                case COLLIDER_NAME.DISPERSION_SURROUND:\n                    scriptSkillCollider = this.node.getComponent(DispersionSurround) as DispersionSurround;\n                    if (!scriptSkillCollider.skillInfo.penetrate) {\n                        scriptSkillCollider.hide();\n                    }\n                    break;\n            }   \n        } else if (otherCollider.getGroup() == Constant.PHY_GROUP.PLAYER  && GameManager.ndPlayer) {\n            let scriptSkillCollider: any = null;\n\n            switch (this.colliderName) {\n                case COLLIDER_NAME.ENERGY_BALL:\n                    PoolManager.instance.putNode(this.node);\n\n                    scriptSkillCollider = this.node.getComponent(EnergyBall) as EnergyBall;\n                    this._hitPlayer(scriptSkillCollider.baseInfo);\n                    break;\n                case COLLIDER_NAME.FIRE_BALL:\n                    //不在这里回收节点.在fireBall里面会回收\n                    scriptSkillCollider = this.node.parent?.getComponent(FireBall) as FireBall;\n                    this._hitPlayer(scriptSkillCollider.baseInfo);\n                    break;\n                case COLLIDER_NAME.DISPERSION:\n                    //注意这里不回收节点，只回收父节点\n                    scriptSkillCollider = this.node.getComponent(Dispersion) as Dispersion;\n                    scriptSkillCollider.hide();\n\n                    this._hitPlayer(scriptSkillCollider.baseInfo);\n                    break;\n                case COLLIDER_NAME.TORNADO:\n                    scriptSkillCollider = this.node.parent?.getComponent(Tornado) as Tornado;\n                    this._hitPlayer(scriptSkillCollider.baseInfo);\n                    break;\n                case COLLIDER_NAME.FIRE_BALL_BIG:\n                    scriptSkillCollider = this.node.parent?.getComponent(FireBallBig) as FireBallBig;\n                    this._hitPlayer(scriptSkillCollider.baseInfo);\n                    break;\n                case COLLIDER_NAME.DISPERSION_SURROUND:\n                    //注意这里不回收，只回收父节点\n                    scriptSkillCollider = this.node.getComponent(DispersionSurround) as DispersionSurround;\n                    scriptSkillCollider.hide();\n                    this._hitPlayer(scriptSkillCollider.baseInfo);\n                    break;\n                case COLLIDER_NAME.LASER:\n                    scriptSkillCollider = this.node.parent?.getComponent(Laser) as Laser;\n                    this._hitPlayer(scriptSkillCollider.baseInfo);\n                    break;\n            }\n        }\n    }\n    \n    private _hitPlayer (baseInfo: any) {\n        if (!baseInfo) {\n            console.warn(\"###找不到技能来源敌人\", this.colliderName);\n            return;\n        }\n        // console.log(\"###技能碰到玩家了\", this.colliderName);\n        GameManager.scriptPlayer.reduceBlood(baseInfo);\n    }\n\n    private _onTriggerStayCb (event: ITriggerEvent) {\n        if (event.otherCollider.getGroup() == Constant.PHY_GROUP.PLAYER  && GameManager.ndPlayer) {\n            this._isOnJetFires = true;            \n        }\n    }\n\n    private _onTriggerExitCb (event: ITriggerEvent) {\n        if (event.otherCollider.getGroup() == Constant.PHY_GROUP.PLAYER  && GameManager.ndPlayer) {\n            this._isOnJetFires = false;            \n        }\n    }\n\n    update (deltaTime: number) {\n        if (GameManager.isGameOver || !GameManager.ndPlayer || !this.node.parent) {\n            return;    \n        }\n\n        //检测是否在龙焰（持续性技能里面），每隔0.5秒时间扣减一定伤害\n        if (this.colliderName === COLLIDER_NAME.JET_FIRES && this._isOnJetFires) {\n            this._checkInterval += deltaTime;\n            if (this._checkInterval >= 0.5) {\n                this._checkInterval = 0;\n\n                let scriptSkillCollider = this.node.parent.getComponent(JetFires) as JetFires;\n                this._hitPlayer(scriptSkillCollider.baseInfo);\n            }\n        }\n    }\n}\n\n"]}
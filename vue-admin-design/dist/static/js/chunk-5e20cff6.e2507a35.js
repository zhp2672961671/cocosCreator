(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e20cff6"],{3890:function(e,t,i){"use strict";i("42aa")},"42aa":function(e,t,i){},"4be2":function(e,t,i){"use strict";i("98bf")},"6b45":function(e,t,i){"use strict";var a=function(){var e=this,t=e._self._c;return t("el-upload",{ref:"uploadImage",staticClass:"upload-image-wrapper",attrs:{action:"",accept:".jpg, .png, .bmp, .jpeg, .webp",multiple:!1,"show-file-list":!1,"auto-upload":!1,"on-change":e.handleChange}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v(e._s(e.btnName))])],1)},n=[],s={name:"UploadImage",props:{btnName:{type:String,default:"选择图片"}},methods:{handleChange(e){const t=e.raw;return!!t&&(this.isImage(t)?void(this.isLimit5M(t)&&this.readImage(t)):(this.$message.warning("图片只支持.jpg, .png, .bmp, .jpeg, .webp格式!"),!1))},isLimit5M(e){const t=e.size/1024/1024<5;return!!t||(this.$message.warning("上传的图片大小不能超过5M!"),!1)},isImage(e){return/\.(jpg|png|bmp|jpeg|webp)$/.test(e.name)},readImage(e){const t=new FileReader;t.onload=e=>{let t;t="object"===typeof e.target.result?window.URL.createObjectURL(new Blob([e.target.result])):e.target.result,this.$emit("on-success",t)},t.readAsDataURL(e),t.onerror=e=>{this.$message.error("图片读取出错!")},this.$refs.uploadImage.clearFiles()}}},l=s,o=i("2877"),r=Object(o["a"])(l,a,n,!1,null,null,null);t["a"]=r.exports},"98bf":function(e,t,i){},b522:function(e,t,i){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"hints-wrapper"},[t("div",{staticClass:"hint-title"},[t("i",{staticClass:"vue-dsn-icon-tishi"}),t("span",[e._t("hintName")],2)]),t("div",{staticClass:"hint-info"},[e._t("hintInfo")],2)])},n=[],s={name:"Hints"},l=s,o=(i("3890"),i("2877")),r=Object(o["a"])(l,a,n,!1,null,null,null);t["a"]=r.exports},deda:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"image-compress"},[t("Hints",[t("template",{slot:"hintName"},[e._v("图片压缩")]),t("template",{slot:"hintInfo"},[t("p",[e._v("纯JS实现对图片的等比压缩和放大的功能，并对图片进行下载")])])],2),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:16}},[t("el-card",{attrs:{shadow:"always"}},[t("div",{staticClass:"title",attrs:{slot:"header"},slot:"header"},[e._v("图片区域")]),t("div",{staticClass:"box-wrapper"},[t("div",{staticClass:"image-container",style:e.imageStyle})])])],1),t("el-col",{attrs:{span:8}},[t("el-card",{attrs:{shadow:"always"}},[t("div",{staticClass:"title",attrs:{slot:"header"},slot:"header"},[e._v("设置区域")]),t("div",{staticClass:"box-content"},[t("el-form",{attrs:{"label-width":"82px","label-position":"left"}},[t("el-form-item",{attrs:{label:"选择图片："}},[t("UploadImage",{staticClass:"select-image",attrs:{"btn-name":"选择图片"},on:{"on-success":e.handleSuccess}})],1),t("el-form-item",{attrs:{label:"图片尺寸："}},[t("div",{staticClass:"ratio-size"},[t("el-input",{nativeOn:{keyup:function(t){return e.bindInput("h")}},model:{value:e.imageObj.width,callback:function(t){e.$set(e.imageObj,"width",e._n(t))},expression:"imageObj.width"}}),t("i",{staticClass:"vue-dsn-icon-edit-img-size-locking icon-link"}),t("el-input",{nativeOn:{keyup:function(t){return e.bindInput("w")}},model:{value:e.imageObj.height,callback:function(t){e.$set(e.imageObj,"height",e._n(t))},expression:"imageObj.height"}}),t("ul",{staticClass:"ratio-type clearfix"},[t("li",[e._v("宽")]),t("li",[e._v("高")])])],1)]),t("el-form-item",{staticClass:"item-ratio",attrs:{label:"压缩比例："}},[t("el-input",{attrs:{disabled:""},model:{value:e.imageObj.ratio,callback:function(t){e.$set(e.imageObj,"ratio",e._n(t))},expression:"imageObj.ratio"}})],1),t("el-form-item",{attrs:{label:"图片质量："}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.imageObj.quality,callback:function(t){e.$set(e.imageObj,"quality",t)},expression:"imageObj.quality"}},e._l(e.qualityOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("div",[t("el-button",{staticClass:"btn-compress",attrs:{type:"primary"},on:{click:e.compressImage}},[e._v("压缩图片")])],1)],1)],1)])],1)],1)],1)},n=[],s=i("b522"),l=i("6b45"),o=i("ed08");const r=[{label:100,value:1},{label:90,value:.9},{label:80,value:.8},{label:70,value:.7},{label:60,value:.6},{label:50,value:.5}];var c={name:"ImageCompress",components:{Hints:s["a"],UploadImage:l["a"]},data(){return{image:{width:1920,height:1080,src:"https://cdn.jsdelivr.net/gh/baimingxuan/media-store/images/img03.jpg"},imageShow:{width:0,height:0,imgSrc:""},imageObj:{width:0,height:0,ratio:"100%",quality:1},qualityOptions:r}},computed:{imageStyle(){return{width:this.imageShow.width+"px",height:this.imageShow.height+"px",backgroundImage:"url('"+this.imageShow.imgSrc+"')"}},imageRatio(){return this.image.width/this.image.height}},watch:{image:{handler(e){this.getDragContainerSize(e.width,e.height),this.imageShow.imgSrc=e.src,this.imageObj.width=e.width,this.imageObj.height=e.height,this.imageObj.ratio="100%",this.imageObj.quality=1},deep:!0}},created(){this.getDragContainerSize(this.image.width,this.image.height),this.imageShow.imgSrc=this.image.src,this.imageObj.width=this.image.width,this.imageObj.height=this.image.height},methods:{bindInput(e){"h"===e?this.imageObj.height=Math.round(this.imageObj.width/this.imageRatio).toFixed(0):"w"===e&&(this.imageObj.width=Math.round(this.imageObj.height*this.imageRatio).toFixed(0)),this.imageObj.ratio=(this.imageObj.width/this.image.width*100).toFixed(2)+"%"},getDragContainerSize(e,t){const[i,a]=[850,550],n=Object(o["b"])(e,t,i,a);this.imageShow.width=n.width,this.imageShow.height=n.height},handleSuccess(e){this.image.src=e;const t=new Image;t.src=e,t.onload=()=>{this.image.width=t.width,this.image.height=t.height}},compressImage(){const e=this.imageObj.width,t=this.imageObj.height,i=this.imageObj.quality,a=new Image;a.src=this.image.src,a.onload=()=>{const n=document.createElement("canvas"),s=n.getContext("2d"),l=document.createAttribute("width");l.nodeValue=e;const o=document.createAttribute("height");o.nodeValue=t,n.setAttributeNode(l),n.setAttributeNode(o),s.fillRect(0,0,e,t),s.drawImage(a,0,0,e,t);const r=n.toDataURL("image/png",i);this.downloadImage(r)}},downloadImage(e){const t=Object(o["a"])(e),i=document.createElement("a"),a=document.createEvent("HTMLEvents");a.initEvent("click",!0,!0),i.download="image.png",i.href=URL.createObjectURL(t),i.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))}}},h=c,g=(i("4be2"),i("2877")),d=Object(g["a"])(h,a,n,!1,null,null,null);t["default"]=d.exports},ed08:function(e,t,i){"use strict";i.d(t,"c",(function(){return a})),i.d(t,"d",(function(){return s})),i.d(t,"a",(function(){return l})),i.d(t,"b",(function(){return o}));i("b7ef"),i("14d9"),i("907a"),i("986a"),i("1d02"),i("3c5d"),i("1b3b"),i("3d71"),i("c6e3");function a(e){function t(e){const t=n(e).replace(/</g,"&lt;").replace(/>/g,"&gt;"),i=t.split(/\r\n|\r|\n/);return i?i.map(e=>e.length>0?"<div>"+e+"</div>":"<div><br></div>").join(""):t}let i="";const a=" ".repeat(2);if(e.preventDefault(),e.clipboardData)i=(e.originalEvent||e).clipboardData.getData("text/plain").replace(/\t/g,a),document.execCommand("insertHtml",!1,t(i));else if(window.clipboardData)if(i=window.clipboardData.getData("Text").replace(/\t/g,a),document.selection)document.selection.createRange().pasteHTML(t(i));else if(window.getSelection){const e=window.getSelection(),a=e.getRangeAt(0),n=document.createElement("span");n.innerHTML="&#FEFF;",a.deleteContents(),a.insertNode(n);const s=document.body.createTextRange();s.moveToElementText(n),n.parentNode.removeChild(n),s.pasteHTML(t(i)),s.collapse(!1),s.select()}return t(i)}function n(e){return e.replace(/<(\/?)p>/g,"<$1div>")}function s(e){if(window.getSelection){e.focus();const t=window.getSelection();t.selectAllChildren(e),t.collapseToEnd()}else if(document.selection){const t=document.selection.createRange();t.moveToElementText(e),t.collapse(!1),t.select()}}function l(e){const t=window.atob(e.split(",")[1]),i=[];for(let a=0;a<t.length;a++)i.push(t.charCodeAt(a));return new Blob([new Uint8Array(i)],{type:"image/png"})}function o(e,t,i,a){let[n,s,l]=[0,0,0];if(e>t)if(e>=i){const o=t*(i/e);o>=i?(n=e*(a/t),s=a,l=t/a):(n=i,s=o,l=e/i)}else n=e,s=t,l=1;else t>=a?(n=e*(a/t),s=a,l=t/a):(n=e,s=t,l=1);return{width:n,height:s,ratio:l}}}}]);
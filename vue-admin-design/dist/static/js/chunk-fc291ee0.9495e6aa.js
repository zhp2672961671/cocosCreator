(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fc291ee0"],{"9c59":function(e,t,a){},bac0:function(e,t,a){"use strict";a("9c59")},ea87:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"video-mark-wrapper"},[t("Hints",[t("template",{slot:"hintName"},[e._v("视频水印")]),t("template",{slot:"hintInfo"},[t("p",[e._v("基于VueDRR拖拽功能，在视频上通过叠加图片、文字等，实现视频添加水印的功能")]),t("p",[e._v("VueDRR：基于vue-draggable-resizable的vue组件，可以实现拖动、拉伸和旋转功能")])])],2),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:16}},[t("el-card",{attrs:{shadow:"always"}},[t("div",{staticClass:"title",attrs:{slot:"header"},slot:"header"},[e._v("合成区域")]),t("div",{staticClass:"box-wrapper"},[t("div",{staticClass:"drag-container"},[t("video",{attrs:{src:e.videoSrc,controls:""}}),e._l(e.elements,(function(a,s){return t("ElementDrr",{key:s,style:e.elementZIndex(a.type),attrs:{element:a,handles:e.dragHandles(a.type)},on:{updateActiveEle:e.updateActiveEle}},["image"===a.type?t("img",{attrs:{src:a.src,draggable:"false"}}):e._e(),"text"===a.type?t("ImageRichText",{attrs:{element:a,"active-ele-text":e.activeEleText},model:{value:a.text,callback:function(t){e.$set(a,"text",t)},expression:"item.text"}}):e._e()],1)}))],2)])])],1),t("el-col",{attrs:{span:8}},[t("el-card",{attrs:{shadow:"always"}},[t("div",{staticClass:"title",attrs:{slot:"header"},slot:"header"},[e._v("设置区域")]),t("div",{staticClass:"box-content"},[t("el-form",{staticClass:"form-wrapper",attrs:{"label-width":"70px"}},[t("el-form-item",{attrs:{label:"添加文本"}},[t("el-button",{on:{click:e.addText}},[e._v("添加文本")])],1),t("el-form-item",{attrs:{label:"添加图片"}},[t("UploadImage",{on:{"on-success":e.handleAddImage}})],1),t("el-form-item",{attrs:{label:"删除元素"}},[t("el-button",{attrs:{type:"danger"},on:{click:e.deleteActiveEle}},[e._v("删除元素")])],1)],1),"text"===e.activeEle.type?t("TextSetting",{attrs:{"active-ele-text":e.activeEleText}}):e._e()],1)])],1)],1)],1)},i=[],l=(a("14d9"),a("b522")),n=a("272e"),r=a("4e87"),c=a("892b"),d=a("6b45"),o=a("ed08"),h={name:"VideoMark",components:{Hints:l["a"],ElementDrr:n["a"],ImageRichText:r["a"],TextSetting:c["a"],UploadImage:d["a"]},data(){return{videoSrc:"https://cdn.jsdelivr.net/gh/baimingxuan/media-store/videos/houlang.mp4",elements:[],activeEle:{},eleNum:0}},computed:{activeEleText(){let e={};return"text"===this.activeEle.type&&(e=this.activeEle),e}},created(){this.addText(),this.addImage({active:!1,src:"https://cdn.jsdelivr.net/gh/baimingxuan/media-store/images/img06.jpg",size:53248,width:132,height:132})},methods:{dragHandles(e){if("text"===e)return["e","w"]},elementZIndex(e){let t=1;switch(e){case"text":t=3;break;case"image":t=2;break}return{zIndex:t}},addText(){const e=++this.eleNum,t={active:!0,text:"请输入文本",type:"text",tag:"text_"+e,x:300,y:80,w:180,h:36,style:{textAlign:"left",lineHeight:"24px",fontSize:"24px",fontFamily:"微软黑体",fontWeight:400,color:"#687684",backgroundColor:"#9ac8d8",overflow:"hidden"}};this.elements.length>4?this.$message.warning("图片上最多叠加5个元素！"):(this.elements.push(t),this.updateActiveEle(t))},addImage(e){const t=++this.eleNum,a={active:e.active,type:"image",tag:"image_"+t,x:320,y:260,w:parseInt(e.width),h:parseInt(e.height),src:e.src,size:e.size};this.elements.length>4?this.$message.warning("图片上最多叠加5个元素！"):(this.elements.push(a),e.active&&this.updateActiveEle(a))},handleAddImage(e){const t=e.replace("data:image/jpeg;base64,","").length,a=parseInt(t-t/8*2),s=new Image;s.src=e,s.onload=()=>{const t=Object(o["b"])(s.width,s.height,parseInt(212.5),parseInt(119.5));this.addImage({active:!0,src:e,size:a,width:t.width,height:t.height})}},updateActiveEle(e){this.activeEle=e},deleteActiveEle(){const e=this.elements.filter(e=>e.tag!==this.activeEle.tag);this.$nextTick(()=>{this.elements=e}),this.updateActiveEle({})}}},m=h,g=(a("bac0"),a("2877")),p=Object(g["a"])(m,s,i,!1,null,null,null);t["default"]=p.exports}}]);
{"version":3,"sources":["file:///E:/myCocosGame/mySimpleGame/assets/simple-run/scripts/GameManager.ts"],"names":["_decorator","Component","Node","Vec3","Prefab","LabelComponent","NodePool","PlayerController","GameState","ccclass","property","tempVec3_a","GameManager","type","_coinPool","_coinNum","_straitFloorPool","_roadBlockPool","_checkPassedTime","_checkInterval","_activeFloors","_curState","INIT","coinNum","value","coinScoreLabel","string","curState","initPanel","active","playingPanel","endPanel","PLAYING","END","playerCtrl","onGameStateChanged","start","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Vec3, Prefab, LabelComponent, NodePool } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\nimport { PlayerController } from './PlayerController';\r\nimport {GameDefines, GameState } from './GameDefines';\r\nconst tempVec3_a = new Vec3();\r\n\r\n@ccclass('GameManager')\r\nexport class GameManager extends Component {\r\n    @property({type: Prefab})\r\n    public straitFloorPrfb: Prefab = null;\r\n\r\n    @property({type: Prefab})\r\n    public coinPrfb: Prefab = null;\r\n    @property({type: Prefab})\r\n    public roadBlockPrfb: Prefab = null;\r\n\r\n    @property({type: PlayerController})\r\n    public playerCtrl: PlayerController = null;\r\n    @property({type: LabelComponent})\r\n    public coinScoreLabel: LabelComponent = null;\r\n\r\n    @property({type: Node})\r\n    public initPanel: Node = null;\r\n    @property({type: Node})\r\n    public playingPanel: Node = null;\r\n    @property({type: Node})\r\n    public endPanel: Node = null;\r\n    private _coinPool: NodePool = new NodePool();\r\n    private _coinNum: number = 0;\r\n    private _straitFloorPool: NodePool = new NodePool();\r\n    private _roadBlockPool: NodePool = new NodePool();\r\n    private _checkPassedTime: number = 0;\r\n    private _checkInterval: number = 1;\r\n    private _activeFloors: Node[] = [];\r\n    private _curState: GameState = GameState.INIT;\r\n\r\n    get coinNum() {\r\n        return this._coinNum;\r\n    }\r\n\r\n    set coinNum(value: number) {\r\n        this._coinNum = value;\r\n        this.coinScoreLabel.string = ''+value;\r\n    }\r\n\r\n    set curState(value: GameState) {\r\n        switch(value) {\r\n            case GameState.INIT:\r\n                this.initPanel.active = true;\r\n                this.playingPanel.active = false;\r\n                this.endPanel.active = false;\r\n                // this.reset();\r\n                break;\r\n            case GameState.PLAYING:\r\n                this.initPanel.active = false;\r\n                this.playingPanel.active = true;\r\n                this.coinNum = 0;\r\n\r\n                break;\r\n            case GameState.END:\r\n                this.playingPanel.active = false;\r\n                this.endPanel.active = true;\r\n                break;\r\n        }\r\n\r\n        this._curState = value;\r\n        this.playerCtrl.onGameStateChanged(value);\r\n    }\r\n\r\n    get curState() {\r\n        return this._curState;\r\n    }\r\n    start() {\r\n\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n\r\n    }\r\n}\r\n\r\n\r\n"]}
{"version":3,"sources":["file:///E:/myCocosGame/mySimpleGame/assets/simple-run/scripts/CameraFollow.ts"],"names":["_decorator","Component","Node","Vec3","CCFloat","ccclass","property","v3_a","v3_b","CameraFollow","type","start","lateUpdate","deltaTime","target","getWorldPosition","add","offset","lerp","node","position","smoothSpeed","setWorldPosition","lookAtOffset","lookAt","update"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,O,OAAAA,O;;;;;;;;;OACtC;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;AAE1BO,MAAAA,I,GAAO,IAAIJ,IAAJ,E;AACPK,MAAAA,I,GAAO,IAAIL,IAAJ,E;;8BAGEM,Y,WADZJ,OAAO,CAAC,cAAD,C,UAEHC,QAAQ,CAAC;AAACI,QAAAA,IAAI,EAAER;AAAP,OAAD,C,UAERI,QAAQ,CAAC;AAACI,QAAAA,IAAI,EAAEN;AAAP,OAAD,C,UAERE,QAAQ,CAACH,IAAD,C,UAERG,QAAQ,CAACH,IAAD,C,2BARb,MACaM,YADb,SACkCR,SADlC,CAC4C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AASxCU,QAAAA,KAAK,GAAG,CAEP;;AACDC,QAAAA,UAAU,CAAEC,SAAF,EAAqB;AAC3B;AACA;AACA,eAAKC,MAAL,CAAYC,gBAAZ,CAA6BR,IAA7B;AACAJ,UAAAA,IAAI,CAACa,GAAL,CAASR,IAAT,EAAeD,IAAf,EAAqB,KAAKU,MAA1B,EAJ2B,CAK3B;;AACAd,UAAAA,IAAI,CAACe,IAAL,CAAUV,IAAV,EAAgB,KAAKW,IAAL,CAAUC,QAA1B,EAAoCZ,IAApC,EAA0C,KAAKa,WAA/C;AACA,eAAKF,IAAL,CAAUG,gBAAV,CAA2Bd,IAA3B;AAEAL,UAAAA,IAAI,CAACa,GAAL,CAAST,IAAT,EAAeA,IAAf,EAAqB,KAAKgB,YAA1B;AACA,eAAKJ,IAAL,CAAUK,MAAV,CAAiBjB,IAAjB;AACH;;AAEDkB,QAAAA,MAAM,CAACZ,SAAD,EAAoB,CAEzB;;AA3BuC,O;;;;;iBAElB,I;;;;;;;iBAEO,K;;;;;;;iBAEP,IAAIV,IAAJ,E;;;;;;;iBAEM,IAAIA,IAAJ,E","sourcesContent":["import { _decorator, Component, Node, Vec3, CCFloat } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\nlet v3_a = new Vec3();\r\nlet v3_b = new Vec3();\r\n\r\n@ccclass('CameraFollow')\r\nexport class CameraFollow extends Component {\r\n    @property({type: Node})\r\n    public target: Node = null;\r\n    @property({type: CCFloat})\r\n    public smoothSpeed: number = 0.125;\r\n    @property(Vec3)\r\n    public offset: Vec3 = new Vec3();\r\n    @property(Vec3)\r\n    public lookAtOffset: Vec3 = new Vec3();\r\n    start() {\r\n\r\n    }\r\n    lateUpdate (deltaTime: number) {\r\n        // Your update function goes here.\r\n        // 获取世界坐标\r\n        this.target.getWorldPosition(v3_a);\r\n        Vec3.add(v3_b, v3_a, this.offset);\r\n        // 逐元素向量线性插值： A + t * (B - A)\r\n        Vec3.lerp(v3_b, this.node.position, v3_b, this.smoothSpeed);\r\n        this.node.setWorldPosition(v3_b);\r\n\r\n        Vec3.add(v3_a, v3_a, this.lookAtOffset);\r\n        this.node.lookAt(v3_a);\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n\r\n    }\r\n}\r\n\r\n\r\n"]}